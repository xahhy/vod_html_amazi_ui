!function(g){var I={};function C(n){if(I[n])return I[n].exports;var A=I[n]={i:n,l:!1,exports:{}};return g[n].call(A.exports,A,A.exports,C),A.l=!0,A.exports}C.m=g,C.c=I,C.d=function(g,I,n){C.o(g,I)||Object.defineProperty(g,I,{configurable:!1,enumerable:!0,get:n})},C.r=function(g){Object.defineProperty(g,"__esModule",{value:!0})},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("/**\r\n * Created by hhy on 2017/10/14.\r\n */\r\n\r\n/* 全局变量 开始*/\r\nvar URL_PREFIX = '';\r\nvar HOME_LIST_URL = URL_PREFIX + '/vod/api/home';\r\nvar HOME_OVERVIEW_URL = URL_PREFIX + '/vod/api/home/overview';\r\nvar CATEGORY_URL = URL_PREFIX + '/vod/api/category';\r\nvar YEAR_URL = URL_PREFIX + '/vod/api/year';\r\nvar REGION_URL = URL_PREFIX + '/vod/api/region';\r\nvar VIDEO_LIST_URL = URL_PREFIX + '/vod/api';\r\nvar VIDEO_DETAIL_URL = URL_PREFIX + '/vod/api/';\r\nvar ADMIN_SITE = URL_PREFIX + '/admin';\r\n\r\n\r\nvar DEFAULT_SELECT_DATA = {\r\n    category: '全部',\r\n    year: '全部',\r\n    region: '全部'\r\n};\r\nvar CategoryListData;\r\nvar IScroll = $.AMUI.iScroll;\r\nvar myPlayer;\r\nvar curData = DEFAULT_SELECT_DATA;\r\nvar curTimeDict = {};\r\n/* IE兼容性函数 */\r\nif (typeof String.prototype.endsWith != 'function') {\r\n    String.prototype.endsWith = function (suffix) {\r\n        return this.indexOf(suffix, this.length - suffix.length) !== -1;\r\n    }\r\n}\r\n\r\n/* Vue对象 */\r\n/* 视频缩略图组件 */\r\nvar VideoItem = {\r\n    template: '#id_video_item',\r\n    props: ['video'],\r\n    computed: {\r\n        full_image_url: function () {\r\n            return URL_PREFIX + this.video.image;\r\n        }\r\n    },\r\n    methods: {\r\n        selectVideo: function (id) {\r\n            router.push({path: '/vod/' + id});\r\n            console.log('select video ' + id)\r\n        }\r\n    }\r\n};\r\n/* 主页分类视频概览 */\r\nvar HomeCategoryVideo = {\r\n    name: 'HomeCategory',\r\n    template: '#id_home_category',\r\n    props: ['category'],\r\n    components: {\r\n        'video-item': VideoItem\r\n    },\r\n    data: function () {\r\n        return {\r\n            videos: []\r\n        };\r\n    },\r\n    mounted: function () {\r\n        var vue = this;\r\n        var context = {\r\n            category: this.category.name\r\n        };\r\n        $.get(HOME_OVERVIEW_URL, context, function (data, status) {\r\n            if (!data['error']) {\r\n                vue.videos = data\r\n            } else {\r\n                //alert(data['error'])\r\n            }\r\n        })\r\n    },\r\n    methods: {}\r\n};\r\nVue.component('v-select', VueSelect.VueSelect);\r\nvar HomeView = {\r\n    name: 'Home',\r\n    template: '#id_home',\r\n    props: ['main_categories'],\r\n    components: {\r\n        'category-item': HomeCategoryVideo\r\n    },\r\n    data: function () {\r\n        return {\r\n            count: 0,\r\n            videos: []\r\n        }\r\n    },\r\n    computed: {},\r\n    mounted: function () {\r\n        var vue = this;\r\n        $('.ml6 .letters').each(function () {\r\n            $(this).html($(this).text().replace(/([^\\x00-\\x80]|\\w)/g, \"<span class='letter'>$&</span>\"));\r\n        });\r\n        anime.timeline({loop: true})\r\n            .add({\r\n                targets: '.ml6 .letter',\r\n                translateY: [\"1.1em\", 0],\r\n                translateZ: 0,\r\n                duration: 750,\r\n                delay: function (el, i) {\r\n                    return 50 * i;\r\n                }\r\n            }).add({\r\n            targets: '.ml6',\r\n            opacity: 0,\r\n            duration: 1000,\r\n            easing: \"easeOutExpo\",\r\n            delay: 1000\r\n        });\r\n        $.get(HOME_LIST_URL, function (data, status) {\r\n            vue.count = data['count'];\r\n            vue.videos = data['videos'];\r\n            setTimeout(function () {\r\n                $('#id_home_slider').flexslider();\r\n            }, 100);\r\n        })\r\n    },\r\n    methods: {\r\n        select_video: function (id) {\r\n            router.push({name: 'video_detail', params: {id: id}})\r\n        },\r\n        full_image_url: function (url) {\r\n            return URL_PREFIX + url;\r\n        }\r\n    }\r\n};\r\nvar CategoryList = {\r\n    template: '#id_category_list',\r\n    props: ['category_list'],\r\n    data: function () {\r\n        return {\r\n            active_name: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select: function (name) {\r\n            this.active_name = name;\r\n            App.active_list = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    beforeRouteEnter: function (to, from, next) {\r\n        console.log('category before route enter');\r\n        next(function () {\r\n            load_category_list(to.params.main_category);\r\n        });\r\n    }\r\n};\r\nvar CategoryAdvanced = {\r\n    template: '#id_category_advanced',\r\n    props: ['category_year', 'category_region'],\r\n    data: function () {\r\n        return {\r\n            active_year: '全部',\r\n            active_region: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select_year: function (name) {\r\n            this.active_year = name;\r\n            App.active_year = name;\r\n            load_search_result();\r\n        },\r\n        select_region: function (name) {\r\n            this.active_region = name;\r\n            App.active_region = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    mounted: function () {\r\n    },\r\n    beforeRouteEnter: function (to, from, next) {\r\n        console.log('category advanced before route enter');\r\n        next(function () {\r\n            load_category_year(to.params.main_category);\r\n            load_category_region(to.params.main_category);\r\n        });\r\n    }\r\n};\r\n\r\nvar VideoListData = {\r\n    videos: [],\r\n    cur_page: 1,\r\n    num_pages: 0,\r\n    count: 0,\r\n    search_word: ''\r\n};\r\nvar VideoList = {\r\n    template: '#id_video_list',\r\n    props: [],\r\n    components: {\r\n        'video-item': VideoItem\r\n    },\r\n    data: function () {\r\n        return VideoListData;\r\n    },\r\n    mounted: function () {\r\n        console.log('Video List Created');\r\n        var _video_list = this;\r\n        Bus.$on('resetInfinite', function (search_word) {\r\n            _video_list.search_word = search_word;\r\n            _video_list.resetInfinite(_video_list);\r\n        })\r\n    },\r\n    beforeDestroy: function () {\r\n        console.log('video list before destroy')\r\n    },\r\n    methods: {\r\n        infiniteHandler: function ($state) {\r\n            var vue = this;\r\n            // if(vue.num_pages === 0){\r\n            //     $state.complete();\r\n            //     return null;\r\n            // }\r\n            var context = {\r\n                'page': vue.cur_page,\r\n                'main_category': router.currentRoute.params.main_category,\r\n                'category': App.active_list,\r\n                'year': App.active_year,\r\n                'region': App.active_region,\r\n                'search': vue.search_word\r\n            };\r\n            console.log(context);\r\n            $.get(VIDEO_LIST_URL, context, function (data, status) {\r\n                vue.count = data['count'];\r\n                vue.cur_page = data['cur_page'];\r\n                vue.num_pages = data['num_pages'];\r\n                $.each(data['results'], function (index, value) {\r\n                    vue.videos.push(value);\r\n                });\r\n                if (vue.cur_page === vue.num_pages) {\r\n                    $state.complete();\r\n                } else {\r\n                    console.log('cur_page=' + vue.cur_page);\r\n                    $state.loaded();\r\n                    vue.cur_page++;\r\n                }\r\n            });\r\n        },\r\n        resetInfinite: function (object) {\r\n            var _video_list = object;\r\n            _video_list.videos = [];\r\n            _video_list.cur_page = 1;\r\n            _video_list.num_pages = 1;\r\n            _video_list.$nextTick(function () {\r\n                console.log('Reset Video Gallery');\r\n                _video_list.$refs.infiniteLoading.$emit('$InfiniteLoading:reset');\r\n            });\r\n        }\r\n    },\r\n    beforeRouteUpdate: function (to, from, next) {\r\n        console.log('video list reused!');\r\n        load_category_info(to.params.main_category);\r\n        load_search_result();\r\n        next();\r\n    }\r\n};\r\nvar VideoContainer = {\r\n    template: '#id_detail',\r\n    props: ['video'],\r\n    data: function () {\r\n        return {\r\n            active_name: '-1'\r\n        }\r\n    },\r\n    computed: {},\r\n    methods: {\r\n        load_video: function (video_url) {\r\n            create_video(video_url);\r\n        },\r\n        select: function (name) {\r\n            this.active_name = name;\r\n        },\r\n        change_description: function (video) {\r\n            this.video.description = video.description;\r\n        }\r\n    },\r\n    mounted: function () {\r\n        console.log('video detail mounted');\r\n        if (router.currentRoute.name === 'video_detail') {\r\n            load_video_detail(router.currentRoute.params.id);\r\n        }\r\n    },\r\n    updated: function () {\r\n        console.log('video detail updated');\r\n    }\r\n};\r\n/* 搜索框 */\r\nvar SearchForm = {\r\n    template: '#id_search_form',\r\n    props: [],\r\n    data: function () {\r\n        return {\r\n            search_word: ''\r\n        }\r\n    },\r\n    methods: {\r\n        onSubmit: function () {\r\n            Bus.$emit('resetInfinite', this.search_word);\r\n        }\r\n    }\r\n};\r\n\r\n/* 路由 */\r\nvar router = new VueRouter({\r\n    mode: 'hash',\r\n    base: window.location.href,\r\n    linkActiveClass: 'am-active',\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            components: {\r\n                default: HomeView\r\n            },\r\n            props: {\r\n                default: true\r\n            }\r\n        },\r\n        {\r\n            path: '/vod/:id',\r\n            name: 'video_detail',\r\n            components: {\r\n                video_detail: VideoContainer\r\n            },\r\n            props: {\r\n                video_detail: true\r\n            }\r\n        },\r\n        {\r\n            path: '/list/:main_category',\r\n            components: {\r\n                search_form: SearchForm,\r\n                category_list: CategoryList,\r\n                category_advanced: CategoryAdvanced,\r\n                video_list: VideoList\r\n            },\r\n            props: {\r\n                category_list: true,\r\n                category_advanced: true,\r\n                video_list: true\r\n            },\r\n            beforeEnter: function (to, from, next) {\r\n                console.log('router beforeEnter');\r\n                next();\r\n            }\r\n        }\r\n    ]\r\n});\r\nrouter.afterEach(function (to) {\r\n    destroy_video();\r\n});\r\nvar Bus = new Vue();\r\nvar App = new Vue({\r\n    el: '#id_app',\r\n    router: router,\r\n    data: {\r\n        main_categories: [],\r\n        active_name: '',\r\n        active_list: '全部',\r\n        active_year: '全部',\r\n        active_region: '全部',\r\n        category_list: [],\r\n        category_year: [],\r\n        category_region: [],\r\n        video: {}\r\n    }\r\n});\r\n// router.beforeEach(function (to, from, next) {\r\n//     // load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     // next();\r\n//     load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     console.log('success');\r\n//     next();\r\n// });\r\n\r\nfunction load_category_main() {\r\n    var first = true;\r\n    $.each(CategoryListData, function (key, value) {\r\n        if (first) {\r\n            App.active_name = key;\r\n            first = false;\r\n        }\r\n        App.main_categories.push({name: key});\r\n    });\r\n    load_category_info(router.currentRoute.params.main_category);\r\n}\r\n\r\nfunction load_category_info(main_category) {\r\n    load_category_list(main_category);\r\n    load_category_year(main_category);\r\n    load_category_region(main_category);\r\n}\r\n\r\nfunction load_category_list(active_name) {\r\n    App.category_list = [\r\n        {name: '全部'}\r\n    ];\r\n    if (!CategoryListData) return;\r\n    $.each(CategoryListData[active_name], function (index, item) {\r\n        App.category_list.push(item);\r\n    });\r\n}\r\n\r\nfunction load_category_year(name) {\r\n    var context = {'category': name};\r\n    $.get(YEAR_URL, context, function (data, status) {\r\n        App.category_year = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_year.push({name: value});\r\n        });\r\n    })\r\n}\r\n\r\nfunction load_category_region(name) {\r\n    var context = {'category': name};\r\n    $.get(REGION_URL, context, function (data, status) {\r\n        App.category_region = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_region.push(value);\r\n        });\r\n        App.active_region = '全部';\r\n    })\r\n}\r\n\r\nfunction load_search_result() {\r\n    Bus.$emit('resetInfinite');\r\n}\r\n\r\nfunction load_video_detail(id) {\r\n    var url = VIDEO_DETAIL_URL + id;\r\n    $.get(url, function (data, status) {\r\n        App.video = data;\r\n        create_video(App.video.video);\r\n    });\r\n}\r\n\r\nfunction destroy_video() {\r\n    if (myPlayer) {\r\n        myPlayer.video.src = '';\r\n        // myPlayer.destroy();\r\n        document.getElementById('id_video_container').innerHTML = '';\r\n        myPlayer = null;\r\n    }\r\n}\r\n\r\nfunction create_video(video_url) {\r\n    if (myPlayer) {\r\n        curTimeDict[myPlayer.url] = myPlayer.video.currentTime;\r\n        myPlayer.switchVideo(\r\n            {\r\n                url: video_url\r\n            }\r\n        );\r\n        myPlayer.url=video_url;\r\n    } else {\r\n        myPlayer = new DPlayer({\r\n            container: document.getElementById('id_video_container'),\r\n            screenshot: true,\r\n            video: {\r\n                url: video_url\r\n            }\r\n        });\r\n        myPlayer.url=video_url;\r\n    }\r\n    if (curTimeDict[video_url]) {\r\n        myPlayer.seek(curTimeDict[video_url]);\r\n    }\r\n}\r\n\r\nfunction load_category() {\r\n// $.get(CATEGORY_URL, {format: 'json'}, function (data, status) {\r\n//     // alert('Get Data Done!'+data);\r\n//     CategoryListData = data;\r\n//     // load_category_year();\r\n//     $('#my-modal-loading').modal('close');\r\n//     load_category_main();\r\n// });\r\n    $.ajax({\r\n        url: CATEGORY_URL,\r\n        data: {format: 'json'},\r\n        timeout: 5000,\r\n        success: function (data, status) {\r\n            // alert('Get Data Done!'+data);\r\n            CategoryListData = data;\r\n            // load_category_year();\r\n            $('#my-modal-loading').modal('close');\r\n            load_category_main();\r\n        },\r\n        error: function () {\r\n            load_category();\r\n        }\r\n    });\r\n}\r\n\r\n(function () {\r\n    $('#my-modal-loading').modal();\r\n    $('#id_admin_btn').click(function () {\r\n        window.location.href = ADMIN_SITE;\r\n    });\r\n    load_category();\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBwL3JvdXRlci5qcz9jZmUwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QiwrQkFBK0IsUUFBUTtBQUNoRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxvQ0FBb0MsWUFBWTtBQUNoRCxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgaGh5IG9uIDIwMTcvMTAvMTQuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbi8qIOWFqOWxgOWPmOmHjyDlvIDlp4sqL1xyXG52YXIgVVJMX1BSRUZJWCA9ICcnO1xyXG52YXIgSE9NRV9MSVNUX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvaG9tZSc7XHJcbnZhciBIT01FX09WRVJWSUVXX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvaG9tZS9vdmVydmlldyc7XHJcbnZhciBDQVRFR09SWV9VUkwgPSBVUkxfUFJFRklYICsgJy92b2QvYXBpL2NhdGVnb3J5JztcclxudmFyIFlFQVJfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaS95ZWFyJztcclxudmFyIFJFR0lPTl9VUkwgPSBVUkxfUFJFRklYICsgJy92b2QvYXBpL3JlZ2lvbic7XHJcbnZhciBWSURFT19MSVNUX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGknO1xyXG52YXIgVklERU9fREVUQUlMX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvJztcclxudmFyIEFETUlOX1NJVEUgPSBVUkxfUFJFRklYICsgJy9hZG1pbic7XHJcblxyXG5cclxudmFyIERFRkFVTFRfU0VMRUNUX0RBVEEgPSB7XHJcbiAgICBjYXRlZ29yeTogJ+WFqOmDqCcsXHJcbiAgICB5ZWFyOiAn5YWo6YOoJyxcclxuICAgIHJlZ2lvbjogJ+WFqOmDqCdcclxufTtcclxudmFyIENhdGVnb3J5TGlzdERhdGE7XHJcbnZhciBJU2Nyb2xsID0gJC5BTVVJLmlTY3JvbGw7XHJcbnZhciBteVBsYXllcjtcclxudmFyIGN1ckRhdGEgPSBERUZBVUxUX1NFTEVDVF9EQVRBO1xyXG52YXIgY3VyVGltZURpY3QgPSB7fTtcclxuLyogSUXlhbzlrrnmgKflh73mlbAgKi9cclxuaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoICE9ICdmdW5jdGlvbicpIHtcclxuICAgIFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGggPSBmdW5jdGlvbiAoc3VmZml4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhPZihzdWZmaXgsIHRoaXMubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgIT09IC0xO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKiBWdWXlr7nosaEgKi9cclxuLyog6KeG6aKR57yp55Wl5Zu+57uE5Lu2ICovXHJcbnZhciBWaWRlb0l0ZW0gPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF92aWRlb19pdGVtJyxcclxuICAgIHByb3BzOiBbJ3ZpZGVvJ10sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICAgIGZ1bGxfaW1hZ2VfdXJsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVUkxfUFJFRklYICsgdGhpcy52aWRlby5pbWFnZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIHNlbGVjdFZpZGVvOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgcm91dGVyLnB1c2goe3BhdGg6ICcvdm9kLycgKyBpZH0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0IHZpZGVvICcgKyBpZClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qIOS4u+mhteWIhuexu+inhumikeamguiniCAqL1xyXG52YXIgSG9tZUNhdGVnb3J5VmlkZW8gPSB7XHJcbiAgICBuYW1lOiAnSG9tZUNhdGVnb3J5JyxcclxuICAgIHRlbXBsYXRlOiAnI2lkX2hvbWVfY2F0ZWdvcnknLFxyXG4gICAgcHJvcHM6IFsnY2F0ZWdvcnknXSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAndmlkZW8taXRlbSc6IFZpZGVvSXRlbVxyXG4gICAgfSxcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2aWRlb3M6IFtdXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHZ1ZSA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB0aGlzLmNhdGVnb3J5Lm5hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgICQuZ2V0KEhPTUVfT1ZFUlZJRVdfVVJMLCBjb250ZXh0LCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmICghZGF0YVsnZXJyb3InXSkge1xyXG4gICAgICAgICAgICAgICAgdnVlLnZpZGVvcyA9IGRhdGFcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vYWxlcnQoZGF0YVsnZXJyb3InXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge31cclxufTtcclxuVnVlLmNvbXBvbmVudCgndi1zZWxlY3QnLCBWdWVTZWxlY3QuVnVlU2VsZWN0KTtcclxudmFyIEhvbWVWaWV3ID0ge1xyXG4gICAgbmFtZTogJ0hvbWUnLFxyXG4gICAgdGVtcGxhdGU6ICcjaWRfaG9tZScsXHJcbiAgICBwcm9wczogWydtYWluX2NhdGVnb3JpZXMnXSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAnY2F0ZWdvcnktaXRlbSc6IEhvbWVDYXRlZ29yeVZpZGVvXHJcbiAgICB9LFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICB2aWRlb3M6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7fSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdnVlID0gdGhpcztcclxuICAgICAgICAkKCcubWw2IC5sZXR0ZXJzJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuaHRtbCgkKHRoaXMpLnRleHQoKS5yZXBsYWNlKC8oW15cXHgwMC1cXHg4MF18XFx3KS9nLCBcIjxzcGFuIGNsYXNzPSdsZXR0ZXInPiQmPC9zcGFuPlwiKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYW5pbWUudGltZWxpbmUoe2xvb3A6IHRydWV9KVxyXG4gICAgICAgICAgICAuYWRkKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldHM6ICcubWw2IC5sZXR0ZXInLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlWTogW1wiMS4xZW1cIiwgMF0sXHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVaOiAwLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDc1MCxcclxuICAgICAgICAgICAgICAgIGRlbGF5OiBmdW5jdGlvbiAoZWwsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNTAgKiBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5hZGQoe1xyXG4gICAgICAgICAgICB0YXJnZXRzOiAnLm1sNicsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxyXG4gICAgICAgICAgICBlYXNpbmc6IFwiZWFzZU91dEV4cG9cIixcclxuICAgICAgICAgICAgZGVsYXk6IDEwMDBcclxuICAgICAgICB9KTtcclxuICAgICAgICAkLmdldChIT01FX0xJU1RfVVJMLCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHZ1ZS5jb3VudCA9IGRhdGFbJ2NvdW50J107XHJcbiAgICAgICAgICAgIHZ1ZS52aWRlb3MgPSBkYXRhWyd2aWRlb3MnXTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjaWRfaG9tZV9zbGlkZXInKS5mbGV4c2xpZGVyKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2VsZWN0X3ZpZGVvOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgcm91dGVyLnB1c2goe25hbWU6ICd2aWRlb19kZXRhaWwnLCBwYXJhbXM6IHtpZDogaWR9fSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZ1bGxfaW1hZ2VfdXJsOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVUkxfUFJFRklYICsgdXJsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxudmFyIENhdGVnb3J5TGlzdCA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX2NhdGVnb3J5X2xpc3QnLFxyXG4gICAgcHJvcHM6IFsnY2F0ZWdvcnlfbGlzdCddLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9uYW1lOiAn5YWo6YOoJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZV9uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgQXBwLmFjdGl2ZV9saXN0ID0gbmFtZTtcclxuICAgICAgICAgICAgbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjYXRlZ29yeSBiZWZvcmUgcm91dGUgZW50ZXInKTtcclxuICAgICAgICBuZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbG9hZF9jYXRlZ29yeV9saXN0KHRvLnBhcmFtcy5tYWluX2NhdGVnb3J5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxudmFyIENhdGVnb3J5QWR2YW5jZWQgPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF9jYXRlZ29yeV9hZHZhbmNlZCcsXHJcbiAgICBwcm9wczogWydjYXRlZ29yeV95ZWFyJywgJ2NhdGVnb3J5X3JlZ2lvbiddLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZV95ZWFyOiAn5YWo6YOoJyxcclxuICAgICAgICAgICAgYWN0aXZlX3JlZ2lvbjogJ+WFqOmDqCdcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIHNlbGVjdF95ZWFyOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZV95ZWFyID0gbmFtZTtcclxuICAgICAgICAgICAgQXBwLmFjdGl2ZV95ZWFyID0gbmFtZTtcclxuICAgICAgICAgICAgbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWxlY3RfcmVnaW9uOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZV9yZWdpb24gPSBuYW1lO1xyXG4gICAgICAgICAgICBBcHAuYWN0aXZlX3JlZ2lvbiA9IG5hbWU7XHJcbiAgICAgICAgICAgIGxvYWRfc2VhcmNoX3Jlc3VsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlUm91dGVFbnRlcjogZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NhdGVnb3J5IGFkdmFuY2VkIGJlZm9yZSByb3V0ZSBlbnRlcicpO1xyXG4gICAgICAgIG5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X3llYXIodG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X3JlZ2lvbih0by5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG52YXIgVmlkZW9MaXN0RGF0YSA9IHtcclxuICAgIHZpZGVvczogW10sXHJcbiAgICBjdXJfcGFnZTogMSxcclxuICAgIG51bV9wYWdlczogMCxcclxuICAgIGNvdW50OiAwLFxyXG4gICAgc2VhcmNoX3dvcmQ6ICcnXHJcbn07XHJcbnZhciBWaWRlb0xpc3QgPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF92aWRlb19saXN0JyxcclxuICAgIHByb3BzOiBbXSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAndmlkZW8taXRlbSc6IFZpZGVvSXRlbVxyXG4gICAgfSxcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVmlkZW9MaXN0RGF0YTtcclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1ZpZGVvIExpc3QgQ3JlYXRlZCcpO1xyXG4gICAgICAgIHZhciBfdmlkZW9fbGlzdCA9IHRoaXM7XHJcbiAgICAgICAgQnVzLiRvbigncmVzZXRJbmZpbml0ZScsIGZ1bmN0aW9uIChzZWFyY2hfd29yZCkge1xyXG4gICAgICAgICAgICBfdmlkZW9fbGlzdC5zZWFyY2hfd29yZCA9IHNlYXJjaF93b3JkO1xyXG4gICAgICAgICAgICBfdmlkZW9fbGlzdC5yZXNldEluZmluaXRlKF92aWRlb19saXN0KTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gbGlzdCBiZWZvcmUgZGVzdHJveScpXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIGluZmluaXRlSGFuZGxlcjogZnVuY3Rpb24gKCRzdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdnVlID0gdGhpcztcclxuICAgICAgICAgICAgLy8gaWYodnVlLm51bV9wYWdlcyA9PT0gMCl7XHJcbiAgICAgICAgICAgIC8vICAgICAkc3RhdGUuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgJ3BhZ2UnOiB2dWUuY3VyX3BhZ2UsXHJcbiAgICAgICAgICAgICAgICAnbWFpbl9jYXRlZ29yeSc6IHJvdXRlci5jdXJyZW50Um91dGUucGFyYW1zLm1haW5fY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBBcHAuYWN0aXZlX2xpc3QsXHJcbiAgICAgICAgICAgICAgICAneWVhcic6IEFwcC5hY3RpdmVfeWVhcixcclxuICAgICAgICAgICAgICAgICdyZWdpb24nOiBBcHAuYWN0aXZlX3JlZ2lvbixcclxuICAgICAgICAgICAgICAgICdzZWFyY2gnOiB2dWUuc2VhcmNoX3dvcmRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY29udGV4dCk7XHJcbiAgICAgICAgICAgICQuZ2V0KFZJREVPX0xJU1RfVVJMLCBjb250ZXh0LCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICB2dWUuY291bnQgPSBkYXRhWydjb3VudCddO1xyXG4gICAgICAgICAgICAgICAgdnVlLmN1cl9wYWdlID0gZGF0YVsnY3VyX3BhZ2UnXTtcclxuICAgICAgICAgICAgICAgIHZ1ZS5udW1fcGFnZXMgPSBkYXRhWydudW1fcGFnZXMnXTtcclxuICAgICAgICAgICAgICAgICQuZWFjaChkYXRhWydyZXN1bHRzJ10sIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2dWUudmlkZW9zLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodnVlLmN1cl9wYWdlID09PSB2dWUubnVtX3BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjdXJfcGFnZT0nICsgdnVlLmN1cl9wYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUubG9hZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdnVlLmN1cl9wYWdlKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzZXRJbmZpbml0ZTogZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgX3ZpZGVvX2xpc3QgPSBvYmplY3Q7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LnZpZGVvcyA9IFtdO1xyXG4gICAgICAgICAgICBfdmlkZW9fbGlzdC5jdXJfcGFnZSA9IDE7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0Lm51bV9wYWdlcyA9IDE7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzZXQgVmlkZW8gR2FsbGVyeScpO1xyXG4gICAgICAgICAgICAgICAgX3ZpZGVvX2xpc3QuJHJlZnMuaW5maW5pdGVMb2FkaW5nLiRlbWl0KCckSW5maW5pdGVMb2FkaW5nOnJlc2V0Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBiZWZvcmVSb3V0ZVVwZGF0ZTogZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3ZpZGVvIGxpc3QgcmV1c2VkIScpO1xyXG4gICAgICAgIGxvYWRfY2F0ZWdvcnlfaW5mbyh0by5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbiAgICAgICAgbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfVxyXG59O1xyXG52YXIgVmlkZW9Db250YWluZXIgPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF9kZXRhaWwnLFxyXG4gICAgcHJvcHM6IFsndmlkZW8nXSxcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhY3RpdmVfbmFtZTogJy0xJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb21wdXRlZDoge30sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgbG9hZF92aWRlbzogZnVuY3Rpb24gKHZpZGVvX3VybCkge1xyXG4gICAgICAgICAgICBjcmVhdGVfdmlkZW8odmlkZW9fdXJsKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbGVjdDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVfbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGFuZ2VfZGVzY3JpcHRpb246IGZ1bmN0aW9uICh2aWRlbykge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvLmRlc2NyaXB0aW9uID0gdmlkZW8uZGVzY3JpcHRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gZGV0YWlsIG1vdW50ZWQnKTtcclxuICAgICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS5uYW1lID09PSAndmlkZW9fZGV0YWlsJykge1xyXG4gICAgICAgICAgICBsb2FkX3ZpZGVvX2RldGFpbChyb3V0ZXIuY3VycmVudFJvdXRlLnBhcmFtcy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gZGV0YWlsIHVwZGF0ZWQnKTtcclxuICAgIH1cclxufTtcclxuLyog5pCc57Si5qGGICovXHJcbnZhciBTZWFyY2hGb3JtID0ge1xyXG4gICAgdGVtcGxhdGU6ICcjaWRfc2VhcmNoX2Zvcm0nLFxyXG4gICAgcHJvcHM6IFtdLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlYXJjaF93b3JkOiAnJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQnVzLiRlbWl0KCdyZXNldEluZmluaXRlJywgdGhpcy5zZWFyY2hfd29yZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuLyog6Lev55SxICovXHJcbnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHtcclxuICAgIG1vZGU6ICdoYXNoJyxcclxuICAgIGJhc2U6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgbGlua0FjdGl2ZUNsYXNzOiAnYW0tYWN0aXZlJyxcclxuICAgIHJvdXRlczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGF0aDogJy8nLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBIb21lVmlld1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcm9wczoge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhdGg6ICcvdm9kLzppZCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICd2aWRlb19kZXRhaWwnLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb19kZXRhaWw6IFZpZGVvQ29udGFpbmVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb19kZXRhaWw6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXRoOiAnL2xpc3QvOm1haW5fY2F0ZWdvcnknLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hfZm9ybTogU2VhcmNoRm9ybSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X2xpc3Q6IENhdGVnb3J5TGlzdCxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X2FkdmFuY2VkOiBDYXRlZ29yeUFkdmFuY2VkLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9fbGlzdDogVmlkZW9MaXN0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeV9saXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlfYWR2YW5jZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2aWRlb19saXN0OiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJlZm9yZUVudGVyOiBmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb3V0ZXIgYmVmb3JlRW50ZXInKTtcclxuICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIF1cclxufSk7XHJcbnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKHRvKSB7XHJcbiAgICBkZXN0cm95X3ZpZGVvKCk7XHJcbn0pO1xyXG52YXIgQnVzID0gbmV3IFZ1ZSgpO1xyXG52YXIgQXBwID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyNpZF9hcHAnLFxyXG4gICAgcm91dGVyOiByb3V0ZXIsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgbWFpbl9jYXRlZ29yaWVzOiBbXSxcclxuICAgICAgICBhY3RpdmVfbmFtZTogJycsXHJcbiAgICAgICAgYWN0aXZlX2xpc3Q6ICflhajpg6gnLFxyXG4gICAgICAgIGFjdGl2ZV95ZWFyOiAn5YWo6YOoJyxcclxuICAgICAgICBhY3RpdmVfcmVnaW9uOiAn5YWo6YOoJyxcclxuICAgICAgICBjYXRlZ29yeV9saXN0OiBbXSxcclxuICAgICAgICBjYXRlZ29yeV95ZWFyOiBbXSxcclxuICAgICAgICBjYXRlZ29yeV9yZWdpb246IFtdLFxyXG4gICAgICAgIHZpZGVvOiB7fVxyXG4gICAgfVxyXG59KTtcclxuLy8gcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbi8vICAgICAvLyBsb2FkX2NhdGVnb3J5X2luZm8odG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4vLyAgICAgLy8gbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbi8vICAgICAvLyBuZXh0KCk7XHJcbi8vICAgICBsb2FkX2NhdGVnb3J5X2luZm8odG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4vLyAgICAgLy8gbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbi8vICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycpO1xyXG4vLyAgICAgbmV4dCgpO1xyXG4vLyB9KTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRfY2F0ZWdvcnlfbWFpbigpIHtcclxuICAgIHZhciBmaXJzdCA9IHRydWU7XHJcbiAgICAkLmVhY2goQ2F0ZWdvcnlMaXN0RGF0YSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoZmlyc3QpIHtcclxuICAgICAgICAgICAgQXBwLmFjdGl2ZV9uYW1lID0ga2V5O1xyXG4gICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBBcHAubWFpbl9jYXRlZ29yaWVzLnB1c2goe25hbWU6IGtleX0pO1xyXG4gICAgfSk7XHJcbiAgICBsb2FkX2NhdGVnb3J5X2luZm8ocm91dGVyLmN1cnJlbnRSb3V0ZS5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRfY2F0ZWdvcnlfaW5mbyhtYWluX2NhdGVnb3J5KSB7XHJcbiAgICBsb2FkX2NhdGVnb3J5X2xpc3QobWFpbl9jYXRlZ29yeSk7XHJcbiAgICBsb2FkX2NhdGVnb3J5X3llYXIobWFpbl9jYXRlZ29yeSk7XHJcbiAgICBsb2FkX2NhdGVnb3J5X3JlZ2lvbihtYWluX2NhdGVnb3J5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZF9jYXRlZ29yeV9saXN0KGFjdGl2ZV9uYW1lKSB7XHJcbiAgICBBcHAuY2F0ZWdvcnlfbGlzdCA9IFtcclxuICAgICAgICB7bmFtZTogJ+WFqOmDqCd9XHJcbiAgICBdO1xyXG4gICAgaWYgKCFDYXRlZ29yeUxpc3REYXRhKSByZXR1cm47XHJcbiAgICAkLmVhY2goQ2F0ZWdvcnlMaXN0RGF0YVthY3RpdmVfbmFtZV0sIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgIEFwcC5jYXRlZ29yeV9saXN0LnB1c2goaXRlbSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZF9jYXRlZ29yeV95ZWFyKG5hbWUpIHtcclxuICAgIHZhciBjb250ZXh0ID0geydjYXRlZ29yeSc6IG5hbWV9O1xyXG4gICAgJC5nZXQoWUVBUl9VUkwsIGNvbnRleHQsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICBBcHAuY2F0ZWdvcnlfeWVhciA9IFtcclxuICAgICAgICAgICAge25hbWU6ICflhajpg6gnfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgQXBwLmNhdGVnb3J5X3llYXIucHVzaCh7bmFtZTogdmFsdWV9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRfY2F0ZWdvcnlfcmVnaW9uKG5hbWUpIHtcclxuICAgIHZhciBjb250ZXh0ID0geydjYXRlZ29yeSc6IG5hbWV9O1xyXG4gICAgJC5nZXQoUkVHSU9OX1VSTCwgY29udGV4dCwgZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgIEFwcC5jYXRlZ29yeV9yZWdpb24gPSBbXHJcbiAgICAgICAgICAgIHtuYW1lOiAn5YWo6YOoJ31cclxuICAgICAgICBdO1xyXG4gICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIEFwcC5jYXRlZ29yeV9yZWdpb24ucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgQXBwLmFjdGl2ZV9yZWdpb24gPSAn5YWo6YOoJztcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRfc2VhcmNoX3Jlc3VsdCgpIHtcclxuICAgIEJ1cy4kZW1pdCgncmVzZXRJbmZpbml0ZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkX3ZpZGVvX2RldGFpbChpZCkge1xyXG4gICAgdmFyIHVybCA9IFZJREVPX0RFVEFJTF9VUkwgKyBpZDtcclxuICAgICQuZ2V0KHVybCwgZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgIEFwcC52aWRlbyA9IGRhdGE7XHJcbiAgICAgICAgY3JlYXRlX3ZpZGVvKEFwcC52aWRlby52aWRlbyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVzdHJveV92aWRlbygpIHtcclxuICAgIGlmIChteVBsYXllcikge1xyXG4gICAgICAgIG15UGxheWVyLnZpZGVvLnNyYyA9ICcnO1xyXG4gICAgICAgIC8vIG15UGxheWVyLmRlc3Ryb3koKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRfdmlkZW9fY29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgbXlQbGF5ZXIgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVfdmlkZW8odmlkZW9fdXJsKSB7XHJcbiAgICBpZiAobXlQbGF5ZXIpIHtcclxuICAgICAgICBjdXJUaW1lRGljdFtteVBsYXllci51cmxdID0gbXlQbGF5ZXIudmlkZW8uY3VycmVudFRpbWU7XHJcbiAgICAgICAgbXlQbGF5ZXIuc3dpdGNoVmlkZW8oXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVybDogdmlkZW9fdXJsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIG15UGxheWVyLnVybD12aWRlb191cmw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG15UGxheWVyID0gbmV3IERQbGF5ZXIoe1xyXG4gICAgICAgICAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZF92aWRlb19jb250YWluZXInKSxcclxuICAgICAgICAgICAgc2NyZWVuc2hvdDogdHJ1ZSxcclxuICAgICAgICAgICAgdmlkZW86IHtcclxuICAgICAgICAgICAgICAgIHVybDogdmlkZW9fdXJsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBteVBsYXllci51cmw9dmlkZW9fdXJsO1xyXG4gICAgfVxyXG4gICAgaWYgKGN1clRpbWVEaWN0W3ZpZGVvX3VybF0pIHtcclxuICAgICAgICBteVBsYXllci5zZWVrKGN1clRpbWVEaWN0W3ZpZGVvX3VybF0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5KCkge1xyXG4vLyAkLmdldChDQVRFR09SWV9VUkwsIHtmb3JtYXQ6ICdqc29uJ30sIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuLy8gICAgIC8vIGFsZXJ0KCdHZXQgRGF0YSBEb25lIScrZGF0YSk7XHJcbi8vICAgICBDYXRlZ29yeUxpc3REYXRhID0gZGF0YTtcclxuLy8gICAgIC8vIGxvYWRfY2F0ZWdvcnlfeWVhcigpO1xyXG4vLyAgICAgJCgnI215LW1vZGFsLWxvYWRpbmcnKS5tb2RhbCgnY2xvc2UnKTtcclxuLy8gICAgIGxvYWRfY2F0ZWdvcnlfbWFpbigpO1xyXG4vLyB9KTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBDQVRFR09SWV9VUkwsXHJcbiAgICAgICAgZGF0YToge2Zvcm1hdDogJ2pzb24nfSxcclxuICAgICAgICB0aW1lb3V0OiA1MDAwLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgLy8gYWxlcnQoJ0dldCBEYXRhIERvbmUhJytkYXRhKTtcclxuICAgICAgICAgICAgQ2F0ZWdvcnlMaXN0RGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIC8vIGxvYWRfY2F0ZWdvcnlfeWVhcigpO1xyXG4gICAgICAgICAgICAkKCcjbXktbW9kYWwtbG9hZGluZycpLm1vZGFsKCdjbG9zZScpO1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X21haW4oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxvYWRfY2F0ZWdvcnkoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICQoJyNteS1tb2RhbC1sb2FkaW5nJykubW9kYWwoKTtcclxuICAgICQoJyNpZF9hZG1pbl9idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBBRE1JTl9TSVRFO1xyXG4gICAgfSk7XHJcbiAgICBsb2FkX2NhdGVnb3J5KCk7XHJcbn0pKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);