!function(g){var I={};function C(n){if(I[n])return I[n].exports;var A=I[n]={i:n,l:!1,exports:{}};return g[n].call(A.exports,A,A.exports,C),A.l=!0,A.exports}C.m=g,C.c=I,C.d=function(g,I,n){C.o(g,I)||Object.defineProperty(g,I,{configurable:!1,enumerable:!0,get:n})},C.r=function(g){Object.defineProperty(g,"__esModule",{value:!0})},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("/**\r\n * Created by hhy on 2017/10/14.\r\n */\r\n\r\n/* 全局变量 开始*/\r\nvar URL_PREFIX = '';\r\nvar HOME_LIST_URL = URL_PREFIX + '/vod/api/home';\r\nvar HOME_OVERVIEW_URL = URL_PREFIX + '/vod/api/home/overview';\r\nvar CATEGORY_URL = URL_PREFIX + '/vod/api/category';\r\nvar YEAR_URL = URL_PREFIX + '/vod/api/year';\r\nvar REGION_URL = URL_PREFIX + '/vod/api/region';\r\nvar VIDEO_LIST_URL = URL_PREFIX + '/vod/api';\r\nvar VIDEO_DETAIL_URL = URL_PREFIX + '/vod/api/';\r\nvar ADMIN_SITE = URL_PREFIX + '/admin';\r\n\r\n\r\nvar DEFAULT_SELECT_DATA = {\r\n    category: '全部',\r\n    year: '全部',\r\n    region: '全部'\r\n};\r\nvar CategoryListData;\r\nvar IScroll = $.AMUI.iScroll;\r\nvar myPlayer;\r\nvar curData = DEFAULT_SELECT_DATA;\r\nvar curTimeDict = {};\r\n/* IE兼容性函数 */\r\nif (typeof String.prototype.endsWith != 'function') {\r\n    String.prototype.endsWith = function (suffix) {\r\n        return this.indexOf(suffix, this.length - suffix.length) !== -1;\r\n    }\r\n}\r\n\r\n/* Vue对象 */\r\n/* 视频缩略图组件 */\r\nvar VideoItem = {\r\n    template: '#id_video_item',\r\n    props: ['video'],\r\n    computed: {\r\n        full_image_url: function () {\r\n            return URL_PREFIX + this.video.image;\r\n        }\r\n    },\r\n    methods: {\r\n        selectVideo: function (id) {\r\n            router.push({path: '/vod/' + id});\r\n            console.log('select video ' + id)\r\n        }\r\n    }\r\n};\r\n/* 主页分类视频概览 */\r\nvar HomeCategoryVideo = {\r\n    name: 'HomeCategory',\r\n    template: '#id_home_category',\r\n    props: ['category'],\r\n    components: {\r\n        'video-item': VideoItem\r\n    },\r\n    data: function () {\r\n        return {\r\n            videos: []\r\n        };\r\n    },\r\n    mounted: function () {\r\n        var vue = this;\r\n        var context = {\r\n            category: this.category.name\r\n        };\r\n        $.get(HOME_OVERVIEW_URL, context, function (data, status) {\r\n            if (!data['error']) {\r\n                vue.videos = data\r\n            } else {\r\n                //alert(data['error'])\r\n            }\r\n        })\r\n    },\r\n    methods: {}\r\n};\r\nVue.component('v-select', VueSelect.VueSelect);\r\nvar HomeView = {\r\n    name: 'Home',\r\n    template: '#id_home',\r\n    props: ['main_categories'],\r\n    components: {\r\n        'category-item': HomeCategoryVideo\r\n    },\r\n    data: function () {\r\n        return {\r\n            count: 0,\r\n            videos: []\r\n        }\r\n    },\r\n    computed: {},\r\n    mounted: function () {\r\n        var vue = this;\r\n        $('.ml6 .letters').each(function () {\r\n            $(this).html($(this).text().replace(/([^\\x00-\\x80]|\\w)/g, \"<span class='letter'>$&</span>\"));\r\n        });\r\n        anime.timeline({loop: true})\r\n            .add({\r\n                targets: '.ml6 .letter',\r\n                translateY: [\"1.1em\", 0],\r\n                translateZ: 0,\r\n                duration: 750,\r\n                delay: function (el, i) {\r\n                    return 50 * i;\r\n                }\r\n            }).add({\r\n            targets: '.ml6',\r\n            opacity: 0,\r\n            duration: 1000,\r\n            easing: \"easeOutExpo\",\r\n            delay: 1000\r\n        });\r\n        $.get(HOME_LIST_URL, function (data, status) {\r\n            vue.count = data['count'];\r\n            vue.videos = data['videos'];\r\n            setTimeout(function () {\r\n                $('#id_home_slider').flexslider();\r\n            }, 100);\r\n        })\r\n    },\r\n    methods: {\r\n        select_video: function (id) {\r\n            router.push({name: 'video_detail', params: {id: id}})\r\n        },\r\n        full_image_url: function (url) {\r\n            return URL_PREFIX + url;\r\n        }\r\n    }\r\n};\r\nvar CategoryList = {\r\n    template: '#id_category_list',\r\n    props: ['category_list'],\r\n    data: function () {\r\n        return {\r\n            active_name: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select: function (name) {\r\n            this.active_name = name;\r\n            App.active_list = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    beforeRouteEnter: function (to, from, next) {\r\n        console.log('category before route enter');\r\n        next(function () {\r\n            load_category_list(to.params.main_category);\r\n        });\r\n    }\r\n};\r\nvar CategoryAdvanced = {\r\n    template: '#id_category_advanced',\r\n    props: ['category_year', 'category_region'],\r\n    data: function () {\r\n        return {\r\n            active_year: '全部',\r\n            active_region: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select_year: function (name) {\r\n            this.active_year = name;\r\n            App.active_year = name;\r\n            load_search_result();\r\n        },\r\n        select_region: function (name) {\r\n            this.active_region = name;\r\n            App.active_region = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    mounted: function () {\r\n    },\r\n    beforeRouteEnter: function (to, from, next) {\r\n        console.log('category advanced before route enter');\r\n        next(function () {\r\n            load_category_year(to.params.main_category);\r\n            load_category_region(to.params.main_category);\r\n        });\r\n    }\r\n};\r\n\r\nvar VideoListData = {\r\n    videos: [],\r\n    cur_page: 1,\r\n    num_pages: 0,\r\n    count: 0,\r\n    search_word: ''\r\n};\r\nvar VideoList = {\r\n    template: '#id_video_list',\r\n    props: [],\r\n    components: {\r\n        'video-item': VideoItem\r\n    },\r\n    data: function () {\r\n        return VideoListData;\r\n    },\r\n    mounted: function () {\r\n        console.log('Video List Created');\r\n        var _video_list = this;\r\n        Bus.$on('resetInfinite', function (search_word) {\r\n            _video_list.search_word = search_word;\r\n            _video_list.resetInfinite(_video_list);\r\n        })\r\n    },\r\n    beforeDestroy: function () {\r\n        console.log('video list before destroy')\r\n    },\r\n    methods: {\r\n        infiniteHandler: function ($state) {\r\n            var vue = this;\r\n            // if(vue.num_pages === 0){\r\n            //     $state.complete();\r\n            //     return null;\r\n            // }\r\n            var context = {\r\n                'page': vue.cur_page,\r\n                'main_category': router.currentRoute.params.main_category,\r\n                'category': App.active_list,\r\n                'year': App.active_year,\r\n                'region': App.active_region,\r\n                'search': vue.search_word\r\n            };\r\n            console.log(context);\r\n            $.get(VIDEO_LIST_URL, context, function (data, status) {\r\n                vue.count = data['count'];\r\n                vue.cur_page = data['cur_page'];\r\n                vue.num_pages = data['num_pages'];\r\n                $.each(data['results'], function (index, value) {\r\n                    vue.videos.push(value);\r\n                });\r\n                if (vue.cur_page === vue.num_pages) {\r\n                    $state.complete();\r\n                } else {\r\n                    console.log('cur_page=' + vue.cur_page);\r\n                    $state.loaded();\r\n                    vue.cur_page++;\r\n                }\r\n            });\r\n        },\r\n        resetInfinite: function (object) {\r\n            var _video_list = object;\r\n            _video_list.videos = [];\r\n            _video_list.cur_page = 1;\r\n            _video_list.num_pages = 1;\r\n            _video_list.$nextTick(function () {\r\n                console.log('Reset Video Gallery');\r\n                _video_list.$refs.infiniteLoading.$emit('$InfiniteLoading:reset');\r\n            });\r\n        }\r\n    },\r\n    beforeRouteUpdate: function (to, from, next) {\r\n        console.log('video list reused!');\r\n        load_category_info(to.params.main_category);\r\n        load_search_result();\r\n        next();\r\n    }\r\n};\r\nvar VideoContainer = {\r\n    template: '#id_detail',\r\n    props: ['video'],\r\n    data: function () {\r\n        return {\r\n            active_name: '-1'\r\n        }\r\n    },\r\n    computed: {},\r\n    methods: {\r\n        load_video: function (video_url) {\r\n            create_video(video_url);\r\n        },\r\n        select: function (name) {\r\n            this.active_name = name;\r\n        },\r\n        change_description: function (video) {\r\n            this.video.description = video.description;\r\n        }\r\n    },\r\n    mounted: function () {\r\n        console.log('video detail mounted');\r\n        if (router.currentRoute.name === 'video_detail') {\r\n            load_video_detail(router.currentRoute.params.id);\r\n        }\r\n    },\r\n    updated: function () {\r\n        console.log('video detail updated');\r\n    }\r\n};\r\n/* 搜索框 */\r\nvar SearchForm = {\r\n    template: '#id_search_form',\r\n    props: [],\r\n    data: function () {\r\n        return {\r\n            search_word: ''\r\n        }\r\n    },\r\n    methods: {\r\n        onSubmit: function () {\r\n            Bus.$emit('resetInfinite', this.search_word);\r\n        }\r\n    }\r\n};\r\n\r\n/* 路由 */\r\nvar router = new VueRouter({\r\n    mode: 'hash',\r\n    base: window.location.href,\r\n    linkActiveClass: 'am-active',\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            components: {\r\n                default: HomeView\r\n            },\r\n            props: {\r\n                default: true\r\n            }\r\n        },\r\n        {\r\n            path: '/vod/:id',\r\n            name: 'video_detail',\r\n            components: {\r\n                video_detail: VideoContainer\r\n            },\r\n            props: {\r\n                video_detail: true\r\n            }\r\n        },\r\n        {\r\n            path: '/list/:main_category',\r\n            components: {\r\n                search_form: SearchForm,\r\n                category_list: CategoryList,\r\n                category_advanced: CategoryAdvanced,\r\n                video_list: VideoList\r\n            },\r\n            props: {\r\n                category_list: true,\r\n                category_advanced: true,\r\n                video_list: true\r\n            },\r\n            beforeEnter: function (to, from, next) {\r\n                console.log('router beforeEnter');\r\n                next();\r\n            }\r\n        }\r\n    ]\r\n});\r\nrouter.afterEach(function (to) {\r\n    destroy_video();\r\n});\r\nvar Bus = new Vue();\r\nvar App = new Vue({\r\n    el: '#id_app',\r\n    router: router,\r\n    data: {\r\n        main_categories: [],\r\n        active_name: '',\r\n        active_list: '全部',\r\n        active_year: '全部',\r\n        active_region: '全部',\r\n        category_list: [],\r\n        category_year: [],\r\n        category_region: [],\r\n        video: {}\r\n    }\r\n});\r\n// router.beforeEach(function (to, from, next) {\r\n//     // load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     // next();\r\n//     load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     console.log('success');\r\n//     next();\r\n// });\r\n\r\nfunction load_category_main() {\r\n    var first = true;\r\n    $.each(CategoryListData, function (key, value) {\r\n        if (first) {\r\n            App.active_name = key;\r\n            first = false;\r\n        }\r\n        App.main_categories.push({name: key});\r\n    });\r\n    load_category_info(router.currentRoute.params.main_category);\r\n}\r\n\r\nfunction load_category_info(main_category) {\r\n    load_category_list(main_category);\r\n    load_category_year(main_category);\r\n    load_category_region(main_category);\r\n}\r\n\r\nfunction load_category_list(active_name) {\r\n    App.category_list = [\r\n        {name: '全部'}\r\n    ];\r\n    if (!CategoryListData) return;\r\n    $.each(CategoryListData[active_name], function (index, item) {\r\n        App.category_list.push(item);\r\n    });\r\n}\r\n\r\nfunction load_category_year(name) {\r\n    var context = {'category': name};\r\n    $.get(YEAR_URL, context, function (data, status) {\r\n        App.category_year = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_year.push({name: value});\r\n        });\r\n    })\r\n}\r\n\r\nfunction load_category_region(name) {\r\n    var context = {'category': name};\r\n    $.get(REGION_URL, context, function (data, status) {\r\n        App.category_region = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_region.push(value);\r\n        });\r\n        App.active_region = '全部';\r\n    })\r\n}\r\n\r\nfunction load_search_result() {\r\n    Bus.$emit('resetInfinite');\r\n}\r\n\r\nfunction load_video_detail(id) {\r\n    var url = VIDEO_DETAIL_URL + id;\r\n    $.get(url, function (data, status) {\r\n        App.video = data;\r\n        create_video(App.video.video);\r\n    });\r\n}\r\n\r\nfunction destroy_video() {\r\n    if (myPlayer) {\r\n        myPlayer.video.src = '';\r\n        // myPlayer.destroy();\r\n        document.getElementById('id_video_container').innerHTML = '';\r\n        myPlayer = null;\r\n    }\r\n}\r\n\r\nfunction create_video(video_url) {\r\n    if (myPlayer) {\r\n        curTimeDict[myPlayer.video.src] = myPlayer.video.currentTime;\r\n        myPlayer.switchVideo(\r\n            {\r\n                url: video_url\r\n            }\r\n        );\r\n    } else {\r\n        myPlayer = new DPlayer({\r\n            container: document.getElementById('id_video_container'),\r\n            screenshot: true,\r\n            video: {\r\n                url: video_url\r\n            }\r\n        });\r\n    }\r\n    if (curTimeDict[video_url]) {\r\n        myPlayer.seek(curTimeDict[video_url]);\r\n    }\r\n}\r\n\r\nfunction load_category() {\r\n// $.get(CATEGORY_URL, {format: 'json'}, function (data, status) {\r\n//     // alert('Get Data Done!'+data);\r\n//     CategoryListData = data;\r\n//     // load_category_year();\r\n//     $('#my-modal-loading').modal('close');\r\n//     load_category_main();\r\n// });\r\n    $.ajax({\r\n        url: CATEGORY_URL,\r\n        data: {format: 'json'},\r\n        timeout: 5000,\r\n        success: function (data, status) {\r\n            // alert('Get Data Done!'+data);\r\n            CategoryListData = data;\r\n            // load_category_year();\r\n            $('#my-modal-loading').modal('close');\r\n            load_category_main();\r\n        },\r\n        error: function () {\r\n            load_category();\r\n        }\r\n    });\r\n}\r\n\r\n(function () {\r\n    $('#my-modal-loading').modal();\r\n    $('#id_admin_btn').click(function () {\r\n        window.location.href = ADMIN_SITE;\r\n    });\r\n    load_category();\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBwL3JvdXRlci5qcz9jZmUwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QiwrQkFBK0IsUUFBUTtBQUNoRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxvQ0FBb0MsWUFBWTtBQUNoRCxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBoaHkgb24gMjAxNy8xMC8xNC5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuLyog5YWo5bGA5Y+Y6YePIOW8gOWniyovXHJcbnZhciBVUkxfUFJFRklYID0gJyc7XHJcbnZhciBIT01FX0xJU1RfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaS9ob21lJztcclxudmFyIEhPTUVfT1ZFUlZJRVdfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaS9ob21lL292ZXJ2aWV3JztcclxudmFyIENBVEVHT1JZX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvY2F0ZWdvcnknO1xyXG52YXIgWUVBUl9VUkwgPSBVUkxfUFJFRklYICsgJy92b2QvYXBpL3llYXInO1xyXG52YXIgUkVHSU9OX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvcmVnaW9uJztcclxudmFyIFZJREVPX0xJU1RfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaSc7XHJcbnZhciBWSURFT19ERVRBSUxfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaS8nO1xyXG52YXIgQURNSU5fU0lURSA9IFVSTF9QUkVGSVggKyAnL2FkbWluJztcclxuXHJcblxyXG52YXIgREVGQVVMVF9TRUxFQ1RfREFUQSA9IHtcclxuICAgIGNhdGVnb3J5OiAn5YWo6YOoJyxcclxuICAgIHllYXI6ICflhajpg6gnLFxyXG4gICAgcmVnaW9uOiAn5YWo6YOoJ1xyXG59O1xyXG52YXIgQ2F0ZWdvcnlMaXN0RGF0YTtcclxudmFyIElTY3JvbGwgPSAkLkFNVUkuaVNjcm9sbDtcclxudmFyIG15UGxheWVyO1xyXG52YXIgY3VyRGF0YSA9IERFRkFVTFRfU0VMRUNUX0RBVEE7XHJcbnZhciBjdXJUaW1lRGljdCA9IHt9O1xyXG4vKiBJReWFvOWuueaAp+WHveaVsCAqL1xyXG5pZiAodHlwZW9mIFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGggIT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCA9IGZ1bmN0aW9uIChzdWZmaXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHN1ZmZpeCwgdGhpcy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSAhPT0gLTE7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qIFZ1ZeWvueixoSAqL1xyXG4vKiDop4bpopHnvKnnlaXlm77nu4Tku7YgKi9cclxudmFyIFZpZGVvSXRlbSA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX3ZpZGVvX2l0ZW0nLFxyXG4gICAgcHJvcHM6IFsndmlkZW8nXSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgICAgZnVsbF9pbWFnZV91cmw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVSTF9QUkVGSVggKyB0aGlzLnZpZGVvLmltYWdlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2VsZWN0VmlkZW86IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICByb3V0ZXIucHVzaCh7cGF0aDogJy92b2QvJyArIGlkfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3QgdmlkZW8gJyArIGlkKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyog5Li76aG15YiG57G76KeG6aKR5qaC6KeIICovXHJcbnZhciBIb21lQ2F0ZWdvcnlWaWRlbyA9IHtcclxuICAgIG5hbWU6ICdIb21lQ2F0ZWdvcnknLFxyXG4gICAgdGVtcGxhdGU6ICcjaWRfaG9tZV9jYXRlZ29yeScsXHJcbiAgICBwcm9wczogWydjYXRlZ29yeSddLFxyXG4gICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICd2aWRlby1pdGVtJzogVmlkZW9JdGVtXHJcbiAgICB9LFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZpZGVvczogW11cclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdnVlID0gdGhpcztcclxuICAgICAgICB2YXIgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnkubmFtZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJC5nZXQoSE9NRV9PVkVSVklFV19VUkwsIGNvbnRleHQsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgaWYgKCFkYXRhWydlcnJvciddKSB7XHJcbiAgICAgICAgICAgICAgICB2dWUudmlkZW9zID0gZGF0YVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9hbGVydChkYXRhWydlcnJvciddKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7fVxyXG59O1xyXG5WdWUuY29tcG9uZW50KCd2LXNlbGVjdCcsIFZ1ZVNlbGVjdC5WdWVTZWxlY3QpO1xyXG52YXIgSG9tZVZpZXcgPSB7XHJcbiAgICBuYW1lOiAnSG9tZScsXHJcbiAgICB0ZW1wbGF0ZTogJyNpZF9ob21lJyxcclxuICAgIHByb3BzOiBbJ21haW5fY2F0ZWdvcmllcyddLFxyXG4gICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICdjYXRlZ29yeS1pdGVtJzogSG9tZUNhdGVnb3J5VmlkZW9cclxuICAgIH0sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgIHZpZGVvczogW11cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6IHt9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB2dWUgPSB0aGlzO1xyXG4gICAgICAgICQoJy5tbDYgLmxldHRlcnMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5odG1sKCQodGhpcykudGV4dCgpLnJlcGxhY2UoLyhbXlxceDAwLVxceDgwXXxcXHcpL2csIFwiPHNwYW4gY2xhc3M9J2xldHRlcic+JCY8L3NwYW4+XCIpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhbmltZS50aW1lbGluZSh7bG9vcDogdHJ1ZX0pXHJcbiAgICAgICAgICAgIC5hZGQoe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0czogJy5tbDYgLmxldHRlcicsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiBbXCIxLjFlbVwiLCAwXSxcclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVo6IDAsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNzUwLFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IGZ1bmN0aW9uIChlbCwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA1MCAqIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLmFkZCh7XHJcbiAgICAgICAgICAgIHRhcmdldHM6ICcubWw2JyxcclxuICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0RXhwb1wiLFxyXG4gICAgICAgICAgICBkZWxheTogMTAwMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQuZ2V0KEhPTUVfTElTVF9VUkwsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgdnVlLmNvdW50ID0gZGF0YVsnY291bnQnXTtcclxuICAgICAgICAgICAgdnVlLnZpZGVvcyA9IGRhdGFbJ3ZpZGVvcyddO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNpZF9ob21lX3NsaWRlcicpLmZsZXhzbGlkZXIoKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBzZWxlY3RfdmlkZW86IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICByb3V0ZXIucHVzaCh7bmFtZTogJ3ZpZGVvX2RldGFpbCcsIHBhcmFtczoge2lkOiBpZH19KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnVsbF9pbWFnZV91cmw6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVSTF9QUkVGSVggKyB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG52YXIgQ2F0ZWdvcnlMaXN0ID0ge1xyXG4gICAgdGVtcGxhdGU6ICcjaWRfY2F0ZWdvcnlfbGlzdCcsXHJcbiAgICBwcm9wczogWydjYXRlZ29yeV9saXN0J10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0aXZlX25hbWU6ICflhajpg6gnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX25hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBBcHAuYWN0aXZlX2xpc3QgPSBuYW1lO1xyXG4gICAgICAgICAgICBsb2FkX3NlYXJjaF9yZXN1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlUm91dGVFbnRlcjogZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NhdGVnb3J5IGJlZm9yZSByb3V0ZSBlbnRlcicpO1xyXG4gICAgICAgIG5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X2xpc3QodG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG52YXIgQ2F0ZWdvcnlBZHZhbmNlZCA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX2NhdGVnb3J5X2FkdmFuY2VkJyxcclxuICAgIHByb3BzOiBbJ2NhdGVnb3J5X3llYXInLCAnY2F0ZWdvcnlfcmVnaW9uJ10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0aXZlX3llYXI6ICflhajpg6gnLFxyXG4gICAgICAgICAgICBhY3RpdmVfcmVnaW9uOiAn5YWo6YOoJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2VsZWN0X3llYXI6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX3llYXIgPSBuYW1lO1xyXG4gICAgICAgICAgICBBcHAuYWN0aXZlX3llYXIgPSBuYW1lO1xyXG4gICAgICAgICAgICBsb2FkX3NlYXJjaF9yZXN1bHQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbGVjdF9yZWdpb246IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX3JlZ2lvbiA9IG5hbWU7XHJcbiAgICAgICAgICAgIEFwcC5hY3RpdmVfcmVnaW9uID0gbmFtZTtcclxuICAgICAgICAgICAgbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIH0sXHJcbiAgICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY2F0ZWdvcnkgYWR2YW5jZWQgYmVmb3JlIHJvdXRlIGVudGVyJyk7XHJcbiAgICAgICAgbmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxvYWRfY2F0ZWdvcnlfeWVhcih0by5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbiAgICAgICAgICAgIGxvYWRfY2F0ZWdvcnlfcmVnaW9uKHRvLnBhcmFtcy5tYWluX2NhdGVnb3J5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbnZhciBWaWRlb0xpc3REYXRhID0ge1xyXG4gICAgdmlkZW9zOiBbXSxcclxuICAgIGN1cl9wYWdlOiAxLFxyXG4gICAgbnVtX3BhZ2VzOiAwLFxyXG4gICAgY291bnQ6IDAsXHJcbiAgICBzZWFyY2hfd29yZDogJydcclxufTtcclxudmFyIFZpZGVvTGlzdCA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX3ZpZGVvX2xpc3QnLFxyXG4gICAgcHJvcHM6IFtdLFxyXG4gICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICd2aWRlby1pdGVtJzogVmlkZW9JdGVtXHJcbiAgICB9LFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBWaWRlb0xpc3REYXRhO1xyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVmlkZW8gTGlzdCBDcmVhdGVkJyk7XHJcbiAgICAgICAgdmFyIF92aWRlb19saXN0ID0gdGhpcztcclxuICAgICAgICBCdXMuJG9uKCdyZXNldEluZmluaXRlJywgZnVuY3Rpb24gKHNlYXJjaF93b3JkKSB7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LnNlYXJjaF93b3JkID0gc2VhcmNoX3dvcmQ7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LnJlc2V0SW5maW5pdGUoX3ZpZGVvX2xpc3QpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyBsaXN0IGJlZm9yZSBkZXN0cm95JylcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgaW5maW5pdGVIYW5kbGVyOiBmdW5jdGlvbiAoJHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciB2dWUgPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBpZih2dWUubnVtX3BhZ2VzID09PSAwKXtcclxuICAgICAgICAgICAgLy8gICAgICRzdGF0ZS5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICAncGFnZSc6IHZ1ZS5jdXJfcGFnZSxcclxuICAgICAgICAgICAgICAgICdtYWluX2NhdGVnb3J5Jzogcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXJhbXMubWFpbl9jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IEFwcC5hY3RpdmVfbGlzdCxcclxuICAgICAgICAgICAgICAgICd5ZWFyJzogQXBwLmFjdGl2ZV95ZWFyLFxyXG4gICAgICAgICAgICAgICAgJ3JlZ2lvbic6IEFwcC5hY3RpdmVfcmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgJ3NlYXJjaCc6IHZ1ZS5zZWFyY2hfd29yZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZXh0KTtcclxuICAgICAgICAgICAgJC5nZXQoVklERU9fTElTVF9VUkwsIGNvbnRleHQsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHZ1ZS5jb3VudCA9IGRhdGFbJ2NvdW50J107XHJcbiAgICAgICAgICAgICAgICB2dWUuY3VyX3BhZ2UgPSBkYXRhWydjdXJfcGFnZSddO1xyXG4gICAgICAgICAgICAgICAgdnVlLm51bV9wYWdlcyA9IGRhdGFbJ251bV9wYWdlcyddO1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGRhdGFbJ3Jlc3VsdHMnXSwgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZ1ZS52aWRlb3MucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICh2dWUuY3VyX3BhZ2UgPT09IHZ1ZS5udW1fcGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cl9wYWdlPScgKyB2dWUuY3VyX3BhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5sb2FkZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB2dWUuY3VyX3BhZ2UrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNldEluZmluaXRlOiBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBfdmlkZW9fbGlzdCA9IG9iamVjdDtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QudmlkZW9zID0gW107XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LmN1cl9wYWdlID0gMTtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QubnVtX3BhZ2VzID0gMTtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXNldCBWaWRlbyBHYWxsZXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICBfdmlkZW9fbGlzdC4kcmVmcy5pbmZpbml0ZUxvYWRpbmcuJGVtaXQoJyRJbmZpbml0ZUxvYWRpbmc6cmVzZXQnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGJlZm9yZVJvdXRlVXBkYXRlOiBmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gbGlzdCByZXVzZWQhJyk7XHJcbiAgICAgICAgbG9hZF9jYXRlZ29yeV9pbmZvKHRvLnBhcmFtcy5tYWluX2NhdGVnb3J5KTtcclxuICAgICAgICBsb2FkX3NlYXJjaF9yZXN1bHQoKTtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9XHJcbn07XHJcbnZhciBWaWRlb0NvbnRhaW5lciA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX2RldGFpbCcsXHJcbiAgICBwcm9wczogWyd2aWRlbyddLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9uYW1lOiAnLTEnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7fSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBsb2FkX3ZpZGVvOiBmdW5jdGlvbiAodmlkZW9fdXJsKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZV92aWRlbyh2aWRlb191cmwpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZV9uYW1lID0gbmFtZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYW5nZV9kZXNjcmlwdGlvbjogZnVuY3Rpb24gKHZpZGVvKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW8uZGVzY3JpcHRpb24gPSB2aWRlby5kZXNjcmlwdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyBkZXRhaWwgbW91bnRlZCcpO1xyXG4gICAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLm5hbWUgPT09ICd2aWRlb19kZXRhaWwnKSB7XHJcbiAgICAgICAgICAgIGxvYWRfdmlkZW9fZGV0YWlsKHJvdXRlci5jdXJyZW50Um91dGUucGFyYW1zLmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyBkZXRhaWwgdXBkYXRlZCcpO1xyXG4gICAgfVxyXG59O1xyXG4vKiDmkJzntKLmoYYgKi9cclxudmFyIFNlYXJjaEZvcm0gPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF9zZWFyY2hfZm9ybScsXHJcbiAgICBwcm9wczogW10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VhcmNoX3dvcmQ6ICcnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBvblN1Ym1pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBCdXMuJGVtaXQoJ3Jlc2V0SW5maW5pdGUnLCB0aGlzLnNlYXJjaF93b3JkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4vKiDot6/nlLEgKi9cclxudmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoe1xyXG4gICAgbW9kZTogJ2hhc2gnLFxyXG4gICAgYmFzZTogd2luZG93LmxvY2F0aW9uLmhyZWYsXHJcbiAgICBsaW5rQWN0aXZlQ2xhc3M6ICdhbS1hY3RpdmUnLFxyXG4gICAgcm91dGVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEhvbWVWaWV3XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGF0aDogJy92b2QvOmlkJyxcclxuICAgICAgICAgICAgbmFtZTogJ3ZpZGVvX2RldGFpbCcsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgICAgIHZpZGVvX2RldGFpbDogVmlkZW9Db250YWluZXJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgIHZpZGVvX2RldGFpbDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhdGg6ICcvbGlzdC86bWFpbl9jYXRlZ29yeScsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgICAgIHNlYXJjaF9mb3JtOiBTZWFyY2hGb3JtLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlfbGlzdDogQ2F0ZWdvcnlMaXN0LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlfYWR2YW5jZWQ6IENhdGVnb3J5QWR2YW5jZWQsXHJcbiAgICAgICAgICAgICAgICB2aWRlb19saXN0OiBWaWRlb0xpc3RcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X2xpc3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeV9hZHZhbmNlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZpZGVvX2xpc3Q6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlRW50ZXI6IGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvdXRlciBiZWZvcmVFbnRlcicpO1xyXG4gICAgICAgICAgICAgICAgbmV4dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KTtcclxucm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAodG8pIHtcclxuICAgIGRlc3Ryb3lfdmlkZW8oKTtcclxufSk7XHJcbnZhciBCdXMgPSBuZXcgVnVlKCk7XHJcbnZhciBBcHAgPSBuZXcgVnVlKHtcclxuICAgIGVsOiAnI2lkX2FwcCcsXHJcbiAgICByb3V0ZXI6IHJvdXRlcixcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBtYWluX2NhdGVnb3JpZXM6IFtdLFxyXG4gICAgICAgIGFjdGl2ZV9uYW1lOiAnJyxcclxuICAgICAgICBhY3RpdmVfbGlzdDogJ+WFqOmDqCcsXHJcbiAgICAgICAgYWN0aXZlX3llYXI6ICflhajpg6gnLFxyXG4gICAgICAgIGFjdGl2ZV9yZWdpb246ICflhajpg6gnLFxyXG4gICAgICAgIGNhdGVnb3J5X2xpc3Q6IFtdLFxyXG4gICAgICAgIGNhdGVnb3J5X3llYXI6IFtdLFxyXG4gICAgICAgIGNhdGVnb3J5X3JlZ2lvbjogW10sXHJcbiAgICAgICAgdmlkZW86IHt9XHJcbiAgICB9XHJcbn0pO1xyXG4vLyByb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHtcclxuLy8gICAgIC8vIGxvYWRfY2F0ZWdvcnlfaW5mbyh0by5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbi8vICAgICAvLyBsb2FkX3NlYXJjaF9yZXN1bHQoKTtcclxuLy8gICAgIC8vIG5leHQoKTtcclxuLy8gICAgIGxvYWRfY2F0ZWdvcnlfaW5mbyh0by5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbi8vICAgICAvLyBsb2FkX3NlYXJjaF9yZXN1bHQoKTtcclxuLy8gICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzJyk7XHJcbi8vICAgICBuZXh0KCk7XHJcbi8vIH0pO1xyXG5cclxuZnVuY3Rpb24gbG9hZF9jYXRlZ29yeV9tYWluKCkge1xyXG4gICAgdmFyIGZpcnN0ID0gdHJ1ZTtcclxuICAgICQuZWFjaChDYXRlZ29yeUxpc3REYXRhLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChmaXJzdCkge1xyXG4gICAgICAgICAgICBBcHAuYWN0aXZlX25hbWUgPSBrZXk7XHJcbiAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEFwcC5tYWluX2NhdGVnb3JpZXMucHVzaCh7bmFtZToga2V5fSk7XHJcbiAgICB9KTtcclxuICAgIGxvYWRfY2F0ZWdvcnlfaW5mbyhyb3V0ZXIuY3VycmVudFJvdXRlLnBhcmFtcy5tYWluX2NhdGVnb3J5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZF9jYXRlZ29yeV9pbmZvKG1haW5fY2F0ZWdvcnkpIHtcclxuICAgIGxvYWRfY2F0ZWdvcnlfbGlzdChtYWluX2NhdGVnb3J5KTtcclxuICAgIGxvYWRfY2F0ZWdvcnlfeWVhcihtYWluX2NhdGVnb3J5KTtcclxuICAgIGxvYWRfY2F0ZWdvcnlfcmVnaW9uKG1haW5fY2F0ZWdvcnkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5X2xpc3QoYWN0aXZlX25hbWUpIHtcclxuICAgIEFwcC5jYXRlZ29yeV9saXN0ID0gW1xyXG4gICAgICAgIHtuYW1lOiAn5YWo6YOoJ31cclxuICAgIF07XHJcbiAgICBpZiAoIUNhdGVnb3J5TGlzdERhdGEpIHJldHVybjtcclxuICAgICQuZWFjaChDYXRlZ29yeUxpc3REYXRhW2FjdGl2ZV9uYW1lXSwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XHJcbiAgICAgICAgQXBwLmNhdGVnb3J5X2xpc3QucHVzaChpdGVtKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5X3llYXIobmFtZSkge1xyXG4gICAgdmFyIGNvbnRleHQgPSB7J2NhdGVnb3J5JzogbmFtZX07XHJcbiAgICAkLmdldChZRUFSX1VSTCwgY29udGV4dCwgZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgIEFwcC5jYXRlZ29yeV95ZWFyID0gW1xyXG4gICAgICAgICAgICB7bmFtZTogJ+WFqOmDqCd9XHJcbiAgICAgICAgXTtcclxuICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBBcHAuY2F0ZWdvcnlfeWVhci5wdXNoKHtuYW1lOiB2YWx1ZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZF9jYXRlZ29yeV9yZWdpb24obmFtZSkge1xyXG4gICAgdmFyIGNvbnRleHQgPSB7J2NhdGVnb3J5JzogbmFtZX07XHJcbiAgICAkLmdldChSRUdJT05fVVJMLCBjb250ZXh0LCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgQXBwLmNhdGVnb3J5X3JlZ2lvbiA9IFtcclxuICAgICAgICAgICAge25hbWU6ICflhajpg6gnfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgQXBwLmNhdGVnb3J5X3JlZ2lvbi5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBBcHAuYWN0aXZlX3JlZ2lvbiA9ICflhajpg6gnO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZF9zZWFyY2hfcmVzdWx0KCkge1xyXG4gICAgQnVzLiRlbWl0KCdyZXNldEluZmluaXRlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRfdmlkZW9fZGV0YWlsKGlkKSB7XHJcbiAgICB2YXIgdXJsID0gVklERU9fREVUQUlMX1VSTCArIGlkO1xyXG4gICAgJC5nZXQodXJsLCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgQXBwLnZpZGVvID0gZGF0YTtcclxuICAgICAgICBjcmVhdGVfdmlkZW8oQXBwLnZpZGVvLnZpZGVvKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZXN0cm95X3ZpZGVvKCkge1xyXG4gICAgaWYgKG15UGxheWVyKSB7XHJcbiAgICAgICAgbXlQbGF5ZXIudmlkZW8uc3JjID0gJyc7XHJcbiAgICAgICAgLy8gbXlQbGF5ZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZF92aWRlb19jb250YWluZXInKS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBteVBsYXllciA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZV92aWRlbyh2aWRlb191cmwpIHtcclxuICAgIGlmIChteVBsYXllcikge1xyXG4gICAgICAgIGN1clRpbWVEaWN0W215UGxheWVyLnZpZGVvLnNyY10gPSBteVBsYXllci52aWRlby5jdXJyZW50VGltZTtcclxuICAgICAgICBteVBsYXllci5zd2l0Y2hWaWRlbyhcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdXJsOiB2aWRlb191cmxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG15UGxheWVyID0gbmV3IERQbGF5ZXIoe1xyXG4gICAgICAgICAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZF92aWRlb19jb250YWluZXInKSxcclxuICAgICAgICAgICAgc2NyZWVuc2hvdDogdHJ1ZSxcclxuICAgICAgICAgICAgdmlkZW86IHtcclxuICAgICAgICAgICAgICAgIHVybDogdmlkZW9fdXJsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChjdXJUaW1lRGljdFt2aWRlb191cmxdKSB7XHJcbiAgICAgICAgbXlQbGF5ZXIuc2VlayhjdXJUaW1lRGljdFt2aWRlb191cmxdKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZF9jYXRlZ29yeSgpIHtcclxuLy8gJC5nZXQoQ0FURUdPUllfVVJMLCB7Zm9ybWF0OiAnanNvbid9LCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbi8vICAgICAvLyBhbGVydCgnR2V0IERhdGEgRG9uZSEnK2RhdGEpO1xyXG4vLyAgICAgQ2F0ZWdvcnlMaXN0RGF0YSA9IGRhdGE7XHJcbi8vICAgICAvLyBsb2FkX2NhdGVnb3J5X3llYXIoKTtcclxuLy8gICAgICQoJyNteS1tb2RhbC1sb2FkaW5nJykubW9kYWwoJ2Nsb3NlJyk7XHJcbi8vICAgICBsb2FkX2NhdGVnb3J5X21haW4oKTtcclxuLy8gfSk7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogQ0FURUdPUllfVVJMLFxyXG4gICAgICAgIGRhdGE6IHtmb3JtYXQ6ICdqc29uJ30sXHJcbiAgICAgICAgdGltZW91dDogNTAwMCxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCdHZXQgRGF0YSBEb25lIScrZGF0YSk7XHJcbiAgICAgICAgICAgIENhdGVnb3J5TGlzdERhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAvLyBsb2FkX2NhdGVnb3J5X3llYXIoKTtcclxuICAgICAgICAgICAgJCgnI215LW1vZGFsLWxvYWRpbmcnKS5tb2RhbCgnY2xvc2UnKTtcclxuICAgICAgICAgICAgbG9hZF9jYXRlZ29yeV9tYWluKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcjbXktbW9kYWwtbG9hZGluZycpLm1vZGFsKCk7XHJcbiAgICAkKCcjaWRfYWRtaW5fYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gQURNSU5fU0lURTtcclxuICAgIH0pO1xyXG4gICAgbG9hZF9jYXRlZ29yeSgpO1xyXG59KSgpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);