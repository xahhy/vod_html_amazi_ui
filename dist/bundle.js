/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/**\r\n * Created by hhy on 2017/10/14.\r\n */\r\n\r\n/* 全局变量 开始*/\r\nvar URL_PREFIX = 'http://192.168.0.145:8000';\r\nvar CATEGORY_URL = URL_PREFIX + '/vod/api/category';\r\nvar YEAR_URL = URL_PREFIX + '/vod/api/year';\r\nvar REGION_URL = URL_PREFIX + '/vod/api/region';\r\nvar VIDEO_LIST_URL = URL_PREFIX + '/vod/api';\r\nvar VIDEO_DETAIL_URL = URL_PREFIX + '/vod/api/';\r\nvar ADMIN_SITE = URL_PREFIX + '/admin';\r\nvar TV_LIST_URL = URL_PREFIX + '/vod/api/record';\r\nvar TV_DETAIL_URL = URL_PREFIX + '/vod/api/record/';\r\n\r\nvar DEFAULT_SELECT_DATA = {\r\n    category: '全部',\r\n    year: '全部',\r\n    region: '全部'\r\n};\r\nvar CategoryListData;\r\nvar IScroll = $.AMUI.iScroll;\r\nvar myPlayer;\r\nvar curData = DEFAULT_SELECT_DATA;\r\n/* IE兼容性函数 */\r\nif(typeof String.prototype.endsWith != 'function'){\r\n    String.prototype.endsWith = function (suffix) {\r\n        return this.indexOf(suffix, this.length - suffix.length) !== -1;\r\n    }\r\n}\r\n\r\n/* Vue对象 */\r\nVue.component('v-select', VueSelect.VueSelect);\r\nvar HomeView = {\r\n    name: 'Home',\r\n    template: '<div>Home</div>'\r\n};\r\nvar CategoryList = {\r\n    template: '#id_category_list',\r\n    props: ['category_list'],\r\n    data: function () {\r\n        return {\r\n            active_name: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select: function (name) {\r\n            this.active_name = name;\r\n            App.active_list = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    beforeRouteEnter:function (to, from, next) {\r\n        console.log('category before route enter');\r\n        next(function () {\r\n            load_category_list(to.params.main_category);\r\n        });\r\n    }\r\n};\r\nvar CategoryAdvanced = {\r\n    template: '#id_category_advanced',\r\n    props: ['category_year', 'category_region'],\r\n    data: function () {\r\n        return {\r\n            active_year: '全部',\r\n            active_region: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select_year: function (name) {\r\n            this.active_year = name;\r\n            App.active_year = name;\r\n            load_search_result();\r\n        },\r\n        select_region: function (name) {\r\n            this.active_region = name;\r\n            App.active_region = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    mounted:function () {\r\n    },\r\n    beforeRouteEnter:function (to, from, next) {\r\n        console.log('category advanced before route enter');\r\n        next(function () {\r\n            load_category_year(to.params.main_category);\r\n            load_category_region(to.params.main_category);\r\n        });\r\n    }\r\n};\r\nvar VideoItem = {\r\n    template: '#id_video_item',\r\n    props: ['video'],\r\n    computed: {\r\n        full_image_url: function () {\r\n            return URL_PREFIX + this.video.image;\r\n        }\r\n    },\r\n    methods:{\r\n        selectVideo:function (id) {\r\n            router.push({path: '/vod/' + id});\r\n            console.log('select video '+id)\r\n        }\r\n    }\r\n};\r\nvar VideoListData = {\r\n    videos:[],\r\n    cur_page: 1,\r\n    num_pages: 0,\r\n    count:0\r\n};\r\nvar VideoList = {\r\n    template: '#id_video_list',\r\n    props: [],\r\n    components:{\r\n        'video-item':VideoItem\r\n    },\r\n    data:function () {\r\n        return VideoListData;\r\n    },\r\n    mounted:function () {\r\n        console.log('Video List Created');\r\n        var _video_list = this;\r\n        Bus.$on('resetInfinite', function () {\r\n            _video_list.resetInfinite(_video_list);\r\n        })\r\n    },\r\n    beforeDestroy:function () {\r\n      console.log('video list before destroy')\r\n    },\r\n    methods:{\r\n        infiniteHandler: function ($state) {\r\n            var vue = this;\r\n            // if(vue.num_pages === 0){\r\n            //     $state.complete();\r\n            //     return null;\r\n            // }\r\n            var context = {\r\n                'page': vue.cur_page,\r\n                'main_category': router.currentRoute.params.main_category,\r\n                'category': App.active_list,\r\n                'year': App.active_year,\r\n                'region': App.active_region,\r\n                'search': App.search_word\r\n            };\r\n            console.log(context);\r\n            $.get(VIDEO_LIST_URL, context, function (data, status) {\r\n                vue.count = data['count'];\r\n                vue.cur_page = data['cur_page'];\r\n                vue.num_pages = data['num_pages'];\r\n                $.each(data['results'], function (index, value) {\r\n                    vue.videos.push(value);\r\n                });\r\n                if (vue.cur_page === vue.num_pages) {\r\n                    $state.complete();\r\n                } else {\r\n                    console.log('cur_page=' + vue.cur_page);\r\n                    $state.loaded();\r\n                    vue.cur_page++;\r\n                }\r\n            });\r\n        },\r\n        resetInfinite: function (object) {\r\n            var _video_list = object;\r\n            _video_list.videos = [];\r\n            _video_list.cur_page = 1;\r\n            _video_list.num_pages = 1;\r\n            _video_list.$nextTick(function(){\r\n                console.log('Reset Video Gallery');\r\n                _video_list.$refs.infiniteLoading.$emit('$InfiniteLoading:reset');\r\n            });\r\n        }\r\n    },\r\n    beforeRouteUpdate:function (to, from, next) {\r\n        console.log('video list reused!');\r\n        load_category_info(to.params.main_category);\r\n        load_search_result();\r\n        next();\r\n    }\r\n};\r\nvar VideoContainer = {\r\n    template: '#id_detail',\r\n    props : ['video'],\r\n    data:function () {\r\n        return {\r\n            active_name:''\r\n        }\r\n    },\r\n    computed:{\r\n    },\r\n    methods:{\r\n        load_video: function (video_url) {\r\n            create_video(video_url);\r\n        },\r\n        select: function (name) {\r\n            this.active_name = name;\r\n        },\r\n        change_description: function(video) {\r\n            this.video.description = video.description;\r\n        }\r\n    },\r\n    mounted:function () {\r\n        console.log('video detail mounted');\r\n        if(router.currentRoute.name === 'video_detail'){\r\n            load_video_detail(router.currentRoute.params.id);\r\n        }else if (router.currentRoute.name ==='tv_detail') {\r\n            load_tv_detail(router.currentRoute.params.id);\r\n        }\r\n    },\r\n    updated:function () {\r\n      console.log('video detail updated');\r\n    }\r\n};\r\n// -------------------------------TV---------------------------------------\r\nvar TVCategory = {\r\n    template: '#id_tv',\r\n    methods:{\r\n        select_channel: function (data) {\r\n            console.log(data.channel_id);\r\n        }\r\n    },\r\n    data:function () {\r\n        return {\r\n            options:[{channel_id:null,channel_name:'全部'}],\r\n            selected:{channel_id:null,channel_name:'全部'}\r\n        }\r\n    },\r\n    mounted:function () {\r\n        console.log('TV Category mounted');\r\n        var _tv_category = this;\r\n        $.get(URL_PREFIX+'/tv/api/channels',function(data, status){\r\n            _tv_category.options=[{channel_id:'全部', channel_name:'全部'}];\r\n            _tv_category.options = _tv_category.options.concat(data);\r\n        });\r\n    }\r\n};\r\nvar TVItem = {\r\n    template: '#id_tv_item',\r\n    props: ['video'],\r\n    computed: {\r\n    },\r\n    methods:{\r\n        selectVideo:function (id) {\r\n            router.push({path: '/tv/' + id});\r\n            console.log('select tv '+id)\r\n        }\r\n    }\r\n};\r\nvar TVListData = {\r\n    videos:[],\r\n    cur_page: 1,\r\n    num_pages: 0,\r\n    count:0\r\n};\r\nvar TVList = {\r\n    template: '#id_tv_list',\r\n    props: [],\r\n    components:{\r\n        'tv-item':TVItem\r\n    },\r\n    data:function () {\r\n        return TVListData;\r\n    },\r\n    mounted:function () {\r\n        console.log('TV List Created');\r\n        var _video_list = this;\r\n        Bus.$on('resetInfiniteTV', function () {\r\n            _video_list.resetInfiniteTV(_video_list);\r\n        })\r\n    },\r\n    beforeDestroy:function () {\r\n      console.log('video list before destroy')\r\n    },\r\n    methods:{\r\n        infiniteHandler: function ($state) {\r\n            var vue = this;\r\n            var context = {\r\n                'page': vue.cur_page,\r\n                'search': App.search_word\r\n            };\r\n            console.log(context);\r\n            $.get(TV_LIST_URL, context, function (data, status) {\r\n                vue.count = data['count'];\r\n                vue.cur_page = data['cur_page'];\r\n                vue.num_pages = data['num_pages'];\r\n                $.each(data['results'], function (index, value) {\r\n                    vue.videos.push(value);\r\n                });\r\n                if (vue.cur_page === vue.num_pages) {\r\n                    $state.complete();\r\n                } else {\r\n                    console.log('cur_page=' + vue.cur_page);\r\n                    $state.loaded();\r\n                    vue.cur_page++;\r\n                }\r\n            });\r\n        },\r\n        resetInfiniteTV: function (object) {\r\n            var _video_list = object;\r\n            _video_list.videos = [];\r\n            _video_list.cur_page = 1;\r\n            _video_list.num_pages = 1;\r\n            _video_list.$nextTick(function(){\r\n                console.log('Reset TV Gallery');\r\n                _video_list.$refs.infiniteLoading.$emit('$InfiniteLoading:reset');\r\n            });\r\n        }\r\n    }\r\n};\r\nvar router = new VueRouter({\r\n    mode: 'hash',\r\n    base: window.location.href,\r\n    linkActiveClass: 'am-active',\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            components: {\r\n                default: HomeView\r\n            },\r\n            props: {\r\n                default: true\r\n            }\r\n        },\r\n        {\r\n            path:'/vod/:id',\r\n            name:'video_detail',\r\n            components:{\r\n                video_detail: VideoContainer\r\n            },\r\n            props:{\r\n                video_detail:true\r\n            }\r\n        },\r\n        {\r\n            path: '/list/:main_category',\r\n            components: {\r\n                default: CategoryList,\r\n                category_advanced: CategoryAdvanced,\r\n                video_list: VideoList\r\n            },\r\n            props: {\r\n                default: true,\r\n                category_advanced: true,\r\n                video_list: true\r\n            },\r\n            beforeEnter: function (to, from, next) {\r\n                console.log('router beforeEnter');\r\n                next();\r\n            }\r\n        },\r\n        {\r\n            path: '/tv',\r\n            components:{\r\n                tv_category: TVCategory,\r\n                tv_list: TVList\r\n            },\r\n            props:{\r\n                tv_category: true,\r\n                tv_list: true\r\n            }\r\n        },\r\n        {\r\n            path:'/tv/:id',\r\n            name:'tv_detail',\r\n            components:{\r\n                video_detail: VideoContainer\r\n            },\r\n            props:{\r\n                video_detail:true\r\n            }\r\n        },\r\n\r\n    ]\r\n});\r\nvar Bus = new Vue();\r\nvar App = new Vue({\r\n    el: '#id_app',\r\n    router: router,\r\n    data: {\r\n        main_categories: [],\r\n        active_name: '',\r\n        active_list: '全部',\r\n        active_year: '全部',\r\n        active_region: '全部',\r\n        category_list: [],\r\n        category_year: [],\r\n        category_region: [],\r\n        search_word: '',\r\n        video:{}\r\n    },\r\n    methods:{\r\n        onSubmit:function () {\r\n\r\n            load_search_result();\r\n        }\r\n    }\r\n});\r\n// router.beforeEach(function (to, from, next) {\r\n//     // load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     // next();\r\n//     load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     console.log('success');\r\n//     next();\r\n// });\r\n\r\nfunction load_category_main() {\r\n    var first = true;\r\n    $.each(CategoryListData, function (key, value) {\r\n        if (first) {\r\n            App.active_name = key;\r\n            first = false;\r\n        }\r\n        App.main_categories.push({name: key});\r\n    });\r\n    load_category_info(router.currentRoute.params.main_category);\r\n}\r\nfunction load_category_info(main_category) {\r\n    load_category_list(main_category);\r\n    load_category_year(main_category);\r\n    load_category_region(main_category);\r\n}\r\nfunction load_category_list(active_name) {\r\n    App.category_list = [\r\n        {name: '全部'}\r\n    ];\r\n    if(!CategoryListData)return;\r\n    $.each(CategoryListData[active_name], function (index, item) {\r\n        App.category_list.push(item);\r\n    });\r\n}\r\nfunction load_category_year(name) {\r\n    var context = {'category': name};\r\n    $.get(YEAR_URL, context, function (data, status) {\r\n        App.category_year = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_year.push({name: value});\r\n        });\r\n    })\r\n}\r\nfunction load_category_region(name) {\r\n    var context = {'category': name};\r\n    $.get(REGION_URL, context, function (data, status) {\r\n        App.category_region = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_region.push(value);\r\n        });\r\n        App.active_region = '全部';\r\n    })\r\n}\r\nfunction load_search_result(){\r\n    Bus.$emit('resetInfinite');\r\n}\r\nfunction load_video_detail(id) {\r\n    var url = VIDEO_DETAIL_URL + id;\r\n    $.get(url, function (data, status) {\r\n        App.video = data;\r\n        create_video(App.video.video);\r\n    });\r\n}\r\nfunction load_tv_detail(id) {\r\n    var url = TV_DETAIL_URL + id;\r\n    $.get(url, function (data, status) {\r\n        App.video = data;\r\n        create_video(App.video.url);\r\n    });\r\n}\r\nfunction create_video_detail_html() {\r\n    return '<video id=\"id_video_js\" class=\"video-js vjs-default-skin vjs-fill\">' +\r\n        '<p>该软件不支持播放视频,请使用Chrome或其他浏览器,谢谢</p>' +\r\n        '</video>'\r\n}\r\nfunction create_video(video_url) {\r\n    // myPlayer = videojs('id_video_js',{},function () {\r\n    //     alert('setup videojs');\r\n    // });\r\n\r\n    // if (myPlayer) {\r\n    //     myPlayer.pause();\r\n    //     setTimeout(function() {\r\n    //         myPlayer.dispose();\r\n    //         myPlayer = null;\r\n    //     }, 0);\r\n    // }\r\n    $('#id_video_container').html(create_video_detail_html());\r\n    myPlayer = videojs(document.getElementById('id_video_js'), {\r\n        controls: true,\r\n        autoplay: false,\r\n        preload: 'auto',\r\n        techOrder:['html5', 'flash']\r\n        // flash: {\r\n        //     hls: {\r\n        //         withCredentials: false\r\n        //     }\r\n        // }\r\n    }, function () {\r\n        console.log('setup videojs');\r\n        //自定义播放按钮\r\n        var $customer_play = $('<button class=\"vjs-control\" id=\"id_full_screen\">'+\r\n                '<span>网页全屏</span>'+\r\n                '</button>');\r\n        $customer_play.click(onClickCustomFullScreen);\r\n        // var controlBar = document.getElementsByClassName('vjs-control-bar')[0];\r\n        $('.vjs-control-bar').append($customer_play);\r\n    });\r\n    myPlayer.pause();\r\n    var src = {\r\n        src: video_url,\r\n        type: 'video/mp4',\r\n        withCredentials: false\r\n    };\r\n    if (video_url.endsWith('m3u8')) {\r\n      src.type = 'application/x-mpegURL';\r\n      src.src = URL_PREFIX + '/media/record/' + src.src;\r\n      console.log('m3u8 url is:'+src.src);\r\n    }\r\n    myPlayer.src(src);\r\n    myPlayer.play();\r\n}\r\nvar current_full_screen = false;\r\nfunction onClickCustomFullScreen() {\r\n    //language=JQuery-CSS\r\n    var $video_container = $(\"#id_video_container\");\r\n    var $full_screen_btn = $(\"#id_full_screen\");\r\n    if(!current_full_screen){\r\n        current_full_screen = true;\r\n        $video_container.addClass('custom_full_screen');\r\n        $video_container.addClass('video-wrapper-full');\r\n        $full_screen_btn.html('<span>取消全屏</span>')\r\n    }else{\r\n        current_full_screen = false;\r\n        $video_container.removeClass('custom_full_screen');\r\n        $video_container.removeClass('video-wrapper-full');\r\n        $full_screen_btn.html('<span>网页全屏</span>')\r\n    }\r\n}\r\n(function () {\r\n    $('#my-modal-loading').modal();\r\n    $('#id_admin_btn').click(function(){\r\n        window.location.href = ADMIN_SITE;\r\n    });\r\n    $.get(CATEGORY_URL, {format:'json'}, function (data, status) {\r\n        // alert('Get Data Done!'+data);\r\n        CategoryListData = data;\r\n        // load_category_year();\r\n        $('#my-modal-loading').modal('close');\r\n        load_category_main();\r\n    });\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBwL3JvdXRlci5qcz9kMmE5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0JBQXNCLGtDQUFrQztBQUN4RCxzQkFBc0I7QUFDdEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsbUNBQW1DO0FBQ3RFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0NBQW9DLFlBQVk7QUFDaEQsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHlCQUF5QixjQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgaGh5IG9uIDIwMTcvMTAvMTQuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbi8qIOWFqOWxgOWPmOmHjyDlvIDlp4sqL1xyXG52YXIgVVJMX1BSRUZJWCA9ICdodHRwOi8vMTkyLjE2OC4wLjE0NTo4MDAwJztcclxudmFyIENBVEVHT1JZX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvY2F0ZWdvcnknO1xyXG52YXIgWUVBUl9VUkwgPSBVUkxfUFJFRklYICsgJy92b2QvYXBpL3llYXInO1xyXG52YXIgUkVHSU9OX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvcmVnaW9uJztcclxudmFyIFZJREVPX0xJU1RfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaSc7XHJcbnZhciBWSURFT19ERVRBSUxfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaS8nO1xyXG52YXIgQURNSU5fU0lURSA9IFVSTF9QUkVGSVggKyAnL2FkbWluJztcclxudmFyIFRWX0xJU1RfVVJMID0gVVJMX1BSRUZJWCArICcvdm9kL2FwaS9yZWNvcmQnO1xyXG52YXIgVFZfREVUQUlMX1VSTCA9IFVSTF9QUkVGSVggKyAnL3ZvZC9hcGkvcmVjb3JkLyc7XHJcblxyXG52YXIgREVGQVVMVF9TRUxFQ1RfREFUQSA9IHtcclxuICAgIGNhdGVnb3J5OiAn5YWo6YOoJyxcclxuICAgIHllYXI6ICflhajpg6gnLFxyXG4gICAgcmVnaW9uOiAn5YWo6YOoJ1xyXG59O1xyXG52YXIgQ2F0ZWdvcnlMaXN0RGF0YTtcclxudmFyIElTY3JvbGwgPSAkLkFNVUkuaVNjcm9sbDtcclxudmFyIG15UGxheWVyO1xyXG52YXIgY3VyRGF0YSA9IERFRkFVTFRfU0VMRUNUX0RBVEE7XHJcbi8qIElF5YW85a655oCn5Ye95pWwICovXHJcbmlmKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoICE9ICdmdW5jdGlvbicpe1xyXG4gICAgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCA9IGZ1bmN0aW9uIChzdWZmaXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHN1ZmZpeCwgdGhpcy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSAhPT0gLTE7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qIFZ1ZeWvueixoSAqL1xyXG5WdWUuY29tcG9uZW50KCd2LXNlbGVjdCcsIFZ1ZVNlbGVjdC5WdWVTZWxlY3QpO1xyXG52YXIgSG9tZVZpZXcgPSB7XHJcbiAgICBuYW1lOiAnSG9tZScsXHJcbiAgICB0ZW1wbGF0ZTogJzxkaXY+SG9tZTwvZGl2PidcclxufTtcclxudmFyIENhdGVnb3J5TGlzdCA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX2NhdGVnb3J5X2xpc3QnLFxyXG4gICAgcHJvcHM6IFsnY2F0ZWdvcnlfbGlzdCddLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9uYW1lOiAn5YWo6YOoJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZV9uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgQXBwLmFjdGl2ZV9saXN0ID0gbmFtZTtcclxuICAgICAgICAgICAgbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGJlZm9yZVJvdXRlRW50ZXI6ZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NhdGVnb3J5IGJlZm9yZSByb3V0ZSBlbnRlcicpO1xyXG4gICAgICAgIG5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X2xpc3QodG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG52YXIgQ2F0ZWdvcnlBZHZhbmNlZCA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX2NhdGVnb3J5X2FkdmFuY2VkJyxcclxuICAgIHByb3BzOiBbJ2NhdGVnb3J5X3llYXInLCAnY2F0ZWdvcnlfcmVnaW9uJ10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0aXZlX3llYXI6ICflhajpg6gnLFxyXG4gICAgICAgICAgICBhY3RpdmVfcmVnaW9uOiAn5YWo6YOoJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2VsZWN0X3llYXI6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX3llYXIgPSBuYW1lO1xyXG4gICAgICAgICAgICBBcHAuYWN0aXZlX3llYXIgPSBuYW1lO1xyXG4gICAgICAgICAgICBsb2FkX3NlYXJjaF9yZXN1bHQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbGVjdF9yZWdpb246IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX3JlZ2lvbiA9IG5hbWU7XHJcbiAgICAgICAgICAgIEFwcC5hY3RpdmVfcmVnaW9uID0gbmFtZTtcclxuICAgICAgICAgICAgbG9hZF9zZWFyY2hfcmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6ZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuICAgIGJlZm9yZVJvdXRlRW50ZXI6ZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NhdGVnb3J5IGFkdmFuY2VkIGJlZm9yZSByb3V0ZSBlbnRlcicpO1xyXG4gICAgICAgIG5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X3llYXIodG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICBsb2FkX2NhdGVnb3J5X3JlZ2lvbih0by5wYXJhbXMubWFpbl9jYXRlZ29yeSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbnZhciBWaWRlb0l0ZW0gPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF92aWRlb19pdGVtJyxcclxuICAgIHByb3BzOiBbJ3ZpZGVvJ10sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICAgIGZ1bGxfaW1hZ2VfdXJsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVUkxfUFJFRklYICsgdGhpcy52aWRlby5pbWFnZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczp7XHJcbiAgICAgICAgc2VsZWN0VmlkZW86ZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIHJvdXRlci5wdXNoKHtwYXRoOiAnL3ZvZC8nICsgaWR9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdCB2aWRlbyAnK2lkKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxudmFyIFZpZGVvTGlzdERhdGEgPSB7XHJcbiAgICB2aWRlb3M6W10sXHJcbiAgICBjdXJfcGFnZTogMSxcclxuICAgIG51bV9wYWdlczogMCxcclxuICAgIGNvdW50OjBcclxufTtcclxudmFyIFZpZGVvTGlzdCA9IHtcclxuICAgIHRlbXBsYXRlOiAnI2lkX3ZpZGVvX2xpc3QnLFxyXG4gICAgcHJvcHM6IFtdLFxyXG4gICAgY29tcG9uZW50czp7XHJcbiAgICAgICAgJ3ZpZGVvLWl0ZW0nOlZpZGVvSXRlbVxyXG4gICAgfSxcclxuICAgIGRhdGE6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBWaWRlb0xpc3REYXRhO1xyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdWaWRlbyBMaXN0IENyZWF0ZWQnKTtcclxuICAgICAgICB2YXIgX3ZpZGVvX2xpc3QgPSB0aGlzO1xyXG4gICAgICAgIEJ1cy4kb24oJ3Jlc2V0SW5maW5pdGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LnJlc2V0SW5maW5pdGUoX3ZpZGVvX2xpc3QpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgYmVmb3JlRGVzdHJveTpmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyBsaXN0IGJlZm9yZSBkZXN0cm95JylcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOntcclxuICAgICAgICBpbmZpbml0ZUhhbmRsZXI6IGZ1bmN0aW9uICgkc3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHZ1ZSA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8vIGlmKHZ1ZS5udW1fcGFnZXMgPT09IDApe1xyXG4gICAgICAgICAgICAvLyAgICAgJHN0YXRlLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICdwYWdlJzogdnVlLmN1cl9wYWdlLFxyXG4gICAgICAgICAgICAgICAgJ21haW5fY2F0ZWdvcnknOiByb3V0ZXIuY3VycmVudFJvdXRlLnBhcmFtcy5tYWluX2NhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzogQXBwLmFjdGl2ZV9saXN0LFxyXG4gICAgICAgICAgICAgICAgJ3llYXInOiBBcHAuYWN0aXZlX3llYXIsXHJcbiAgICAgICAgICAgICAgICAncmVnaW9uJzogQXBwLmFjdGl2ZV9yZWdpb24sXHJcbiAgICAgICAgICAgICAgICAnc2VhcmNoJzogQXBwLnNlYXJjaF93b3JkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkLmdldChWSURFT19MSVNUX1VSTCwgY29udGV4dCwgZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdnVlLmNvdW50ID0gZGF0YVsnY291bnQnXTtcclxuICAgICAgICAgICAgICAgIHZ1ZS5jdXJfcGFnZSA9IGRhdGFbJ2N1cl9wYWdlJ107XHJcbiAgICAgICAgICAgICAgICB2dWUubnVtX3BhZ2VzID0gZGF0YVsnbnVtX3BhZ2VzJ107XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goZGF0YVsncmVzdWx0cyddLCBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdnVlLnZpZGVvcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZ1ZS5jdXJfcGFnZSA9PT0gdnVlLm51bV9wYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3VyX3BhZ2U9JyArIHZ1ZS5jdXJfcGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmxvYWRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZ1ZS5jdXJfcGFnZSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc2V0SW5maW5pdGU6IGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIF92aWRlb19saXN0ID0gb2JqZWN0O1xyXG4gICAgICAgICAgICBfdmlkZW9fbGlzdC52aWRlb3MgPSBbXTtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QuY3VyX3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICBfdmlkZW9fbGlzdC5udW1fcGFnZXMgPSAxO1xyXG4gICAgICAgICAgICBfdmlkZW9fbGlzdC4kbmV4dFRpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXNldCBWaWRlbyBHYWxsZXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICBfdmlkZW9fbGlzdC4kcmVmcy5pbmZpbml0ZUxvYWRpbmcuJGVtaXQoJyRJbmZpbml0ZUxvYWRpbmc6cmVzZXQnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGJlZm9yZVJvdXRlVXBkYXRlOmZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyBsaXN0IHJldXNlZCEnKTtcclxuICAgICAgICBsb2FkX2NhdGVnb3J5X2luZm8odG8ucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG4gICAgICAgIGxvYWRfc2VhcmNoX3Jlc3VsdCgpO1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgIH1cclxufTtcclxudmFyIFZpZGVvQ29udGFpbmVyID0ge1xyXG4gICAgdGVtcGxhdGU6ICcjaWRfZGV0YWlsJyxcclxuICAgIHByb3BzIDogWyd2aWRlbyddLFxyXG4gICAgZGF0YTpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0aXZlX25hbWU6JydcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6e1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6e1xyXG4gICAgICAgIGxvYWRfdmlkZW86IGZ1bmN0aW9uICh2aWRlb191cmwpIHtcclxuICAgICAgICAgICAgY3JlYXRlX3ZpZGVvKHZpZGVvX3VybCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhbmdlX2Rlc2NyaXB0aW9uOiBmdW5jdGlvbih2aWRlbykge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvLmRlc2NyaXB0aW9uID0gdmlkZW8uZGVzY3JpcHRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyBkZXRhaWwgbW91bnRlZCcpO1xyXG4gICAgICAgIGlmKHJvdXRlci5jdXJyZW50Um91dGUubmFtZSA9PT0gJ3ZpZGVvX2RldGFpbCcpe1xyXG4gICAgICAgICAgICBsb2FkX3ZpZGVvX2RldGFpbChyb3V0ZXIuY3VycmVudFJvdXRlLnBhcmFtcy5pZCk7XHJcbiAgICAgICAgfWVsc2UgaWYgKHJvdXRlci5jdXJyZW50Um91dGUubmFtZSA9PT0ndHZfZGV0YWlsJykge1xyXG4gICAgICAgICAgICBsb2FkX3R2X2RldGFpbChyb3V0ZXIuY3VycmVudFJvdXRlLnBhcmFtcy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZWQ6ZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zb2xlLmxvZygndmlkZW8gZGV0YWlsIHVwZGF0ZWQnKTtcclxuICAgIH1cclxufTtcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVRWLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbnZhciBUVkNhdGVnb3J5ID0ge1xyXG4gICAgdGVtcGxhdGU6ICcjaWRfdHYnLFxyXG4gICAgbWV0aG9kczp7XHJcbiAgICAgICAgc2VsZWN0X2NoYW5uZWw6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuY2hhbm5lbF9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRhdGE6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9wdGlvbnM6W3tjaGFubmVsX2lkOm51bGwsY2hhbm5lbF9uYW1lOiflhajpg6gnfV0sXHJcbiAgICAgICAgICAgIHNlbGVjdGVkOntjaGFubmVsX2lkOm51bGwsY2hhbm5lbF9uYW1lOiflhajpg6gnfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVFYgQ2F0ZWdvcnkgbW91bnRlZCcpO1xyXG4gICAgICAgIHZhciBfdHZfY2F0ZWdvcnkgPSB0aGlzO1xyXG4gICAgICAgICQuZ2V0KFVSTF9QUkVGSVgrJy90di9hcGkvY2hhbm5lbHMnLGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XHJcbiAgICAgICAgICAgIF90dl9jYXRlZ29yeS5vcHRpb25zPVt7Y2hhbm5lbF9pZDon5YWo6YOoJywgY2hhbm5lbF9uYW1lOiflhajpg6gnfV07XHJcbiAgICAgICAgICAgIF90dl9jYXRlZ29yeS5vcHRpb25zID0gX3R2X2NhdGVnb3J5Lm9wdGlvbnMuY29uY2F0KGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG52YXIgVFZJdGVtID0ge1xyXG4gICAgdGVtcGxhdGU6ICcjaWRfdHZfaXRlbScsXHJcbiAgICBwcm9wczogWyd2aWRlbyddLFxyXG4gICAgY29tcHV0ZWQ6IHtcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOntcclxuICAgICAgICBzZWxlY3RWaWRlbzpmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgcm91dGVyLnB1c2goe3BhdGg6ICcvdHYvJyArIGlkfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3QgdHYgJytpZClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbnZhciBUVkxpc3REYXRhID0ge1xyXG4gICAgdmlkZW9zOltdLFxyXG4gICAgY3VyX3BhZ2U6IDEsXHJcbiAgICBudW1fcGFnZXM6IDAsXHJcbiAgICBjb3VudDowXHJcbn07XHJcbnZhciBUVkxpc3QgPSB7XHJcbiAgICB0ZW1wbGF0ZTogJyNpZF90dl9saXN0JyxcclxuICAgIHByb3BzOiBbXSxcclxuICAgIGNvbXBvbmVudHM6e1xyXG4gICAgICAgICd0di1pdGVtJzpUVkl0ZW1cclxuICAgIH0sXHJcbiAgICBkYXRhOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVFZMaXN0RGF0YTtcclxuICAgIH0sXHJcbiAgICBtb3VudGVkOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVFYgTGlzdCBDcmVhdGVkJyk7XHJcbiAgICAgICAgdmFyIF92aWRlb19saXN0ID0gdGhpcztcclxuICAgICAgICBCdXMuJG9uKCdyZXNldEluZmluaXRlVFYnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LnJlc2V0SW5maW5pdGVUVihfdmlkZW9fbGlzdCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBiZWZvcmVEZXN0cm95OmZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc29sZS5sb2coJ3ZpZGVvIGxpc3QgYmVmb3JlIGRlc3Ryb3knKVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6e1xyXG4gICAgICAgIGluZmluaXRlSGFuZGxlcjogZnVuY3Rpb24gKCRzdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdnVlID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICAncGFnZSc6IHZ1ZS5jdXJfcGFnZSxcclxuICAgICAgICAgICAgICAgICdzZWFyY2gnOiBBcHAuc2VhcmNoX3dvcmRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY29udGV4dCk7XHJcbiAgICAgICAgICAgICQuZ2V0KFRWX0xJU1RfVVJMLCBjb250ZXh0LCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICB2dWUuY291bnQgPSBkYXRhWydjb3VudCddO1xyXG4gICAgICAgICAgICAgICAgdnVlLmN1cl9wYWdlID0gZGF0YVsnY3VyX3BhZ2UnXTtcclxuICAgICAgICAgICAgICAgIHZ1ZS5udW1fcGFnZXMgPSBkYXRhWydudW1fcGFnZXMnXTtcclxuICAgICAgICAgICAgICAgICQuZWFjaChkYXRhWydyZXN1bHRzJ10sIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2dWUudmlkZW9zLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodnVlLmN1cl9wYWdlID09PSB2dWUubnVtX3BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjdXJfcGFnZT0nICsgdnVlLmN1cl9wYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUubG9hZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdnVlLmN1cl9wYWdlKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzZXRJbmZpbml0ZVRWOiBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBfdmlkZW9fbGlzdCA9IG9iamVjdDtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QudmlkZW9zID0gW107XHJcbiAgICAgICAgICAgIF92aWRlb19saXN0LmN1cl9wYWdlID0gMTtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QubnVtX3BhZ2VzID0gMTtcclxuICAgICAgICAgICAgX3ZpZGVvX2xpc3QuJG5leHRUaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzZXQgVFYgR2FsbGVyeScpO1xyXG4gICAgICAgICAgICAgICAgX3ZpZGVvX2xpc3QuJHJlZnMuaW5maW5pdGVMb2FkaW5nLiRlbWl0KCckSW5maW5pdGVMb2FkaW5nOnJlc2V0Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxudmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoe1xyXG4gICAgbW9kZTogJ2hhc2gnLFxyXG4gICAgYmFzZTogd2luZG93LmxvY2F0aW9uLmhyZWYsXHJcbiAgICBsaW5rQWN0aXZlQ2xhc3M6ICdhbS1hY3RpdmUnLFxyXG4gICAgcm91dGVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEhvbWVWaWV3XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGF0aDonL3ZvZC86aWQnLFxyXG4gICAgICAgICAgICBuYW1lOid2aWRlb19kZXRhaWwnLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOntcclxuICAgICAgICAgICAgICAgIHZpZGVvX2RldGFpbDogVmlkZW9Db250YWluZXJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvcHM6e1xyXG4gICAgICAgICAgICAgICAgdmlkZW9fZGV0YWlsOnRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXRoOiAnL2xpc3QvOm1haW5fY2F0ZWdvcnknLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBDYXRlZ29yeUxpc3QsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeV9hZHZhbmNlZDogQ2F0ZWdvcnlBZHZhbmNlZCxcclxuICAgICAgICAgICAgICAgIHZpZGVvX2xpc3Q6IFZpZGVvTGlzdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcm9wczoge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X2FkdmFuY2VkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9fbGlzdDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVFbnRlcjogZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncm91dGVyIGJlZm9yZUVudGVyJyk7XHJcbiAgICAgICAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGF0aDogJy90dicsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6e1xyXG4gICAgICAgICAgICAgICAgdHZfY2F0ZWdvcnk6IFRWQ2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICB0dl9saXN0OiBUVkxpc3RcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvcHM6e1xyXG4gICAgICAgICAgICAgICAgdHZfY2F0ZWdvcnk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0dl9saXN0OiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGF0aDonL3R2LzppZCcsXHJcbiAgICAgICAgICAgIG5hbWU6J3R2X2RldGFpbCcsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6e1xyXG4gICAgICAgICAgICAgICAgdmlkZW9fZGV0YWlsOiBWaWRlb0NvbnRhaW5lclxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcm9wczp7XHJcbiAgICAgICAgICAgICAgICB2aWRlb19kZXRhaWw6dHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICBdXHJcbn0pO1xyXG52YXIgQnVzID0gbmV3IFZ1ZSgpO1xyXG52YXIgQXBwID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyNpZF9hcHAnLFxyXG4gICAgcm91dGVyOiByb3V0ZXIsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgbWFpbl9jYXRlZ29yaWVzOiBbXSxcclxuICAgICAgICBhY3RpdmVfbmFtZTogJycsXHJcbiAgICAgICAgYWN0aXZlX2xpc3Q6ICflhajpg6gnLFxyXG4gICAgICAgIGFjdGl2ZV95ZWFyOiAn5YWo6YOoJyxcclxuICAgICAgICBhY3RpdmVfcmVnaW9uOiAn5YWo6YOoJyxcclxuICAgICAgICBjYXRlZ29yeV9saXN0OiBbXSxcclxuICAgICAgICBjYXRlZ29yeV95ZWFyOiBbXSxcclxuICAgICAgICBjYXRlZ29yeV9yZWdpb246IFtdLFxyXG4gICAgICAgIHNlYXJjaF93b3JkOiAnJyxcclxuICAgICAgICB2aWRlbzp7fVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6e1xyXG4gICAgICAgIG9uU3VibWl0OmZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIGxvYWRfc2VhcmNoX3Jlc3VsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcbi8vIHJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkge1xyXG4vLyAgICAgLy8gbG9hZF9jYXRlZ29yeV9pbmZvKHRvLnBhcmFtcy5tYWluX2NhdGVnb3J5KTtcclxuLy8gICAgIC8vIGxvYWRfc2VhcmNoX3Jlc3VsdCgpO1xyXG4vLyAgICAgLy8gbmV4dCgpO1xyXG4vLyAgICAgbG9hZF9jYXRlZ29yeV9pbmZvKHRvLnBhcmFtcy5tYWluX2NhdGVnb3J5KTtcclxuLy8gICAgIC8vIGxvYWRfc2VhcmNoX3Jlc3VsdCgpO1xyXG4vLyAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKTtcclxuLy8gICAgIG5leHQoKTtcclxuLy8gfSk7XHJcblxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5X21haW4oKSB7XHJcbiAgICB2YXIgZmlyc3QgPSB0cnVlO1xyXG4gICAgJC5lYWNoKENhdGVnb3J5TGlzdERhdGEsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGZpcnN0KSB7XHJcbiAgICAgICAgICAgIEFwcC5hY3RpdmVfbmFtZSA9IGtleTtcclxuICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgQXBwLm1haW5fY2F0ZWdvcmllcy5wdXNoKHtuYW1lOiBrZXl9KTtcclxuICAgIH0pO1xyXG4gICAgbG9hZF9jYXRlZ29yeV9pbmZvKHJvdXRlci5jdXJyZW50Um91dGUucGFyYW1zLm1haW5fY2F0ZWdvcnkpO1xyXG59XHJcbmZ1bmN0aW9uIGxvYWRfY2F0ZWdvcnlfaW5mbyhtYWluX2NhdGVnb3J5KSB7XHJcbiAgICBsb2FkX2NhdGVnb3J5X2xpc3QobWFpbl9jYXRlZ29yeSk7XHJcbiAgICBsb2FkX2NhdGVnb3J5X3llYXIobWFpbl9jYXRlZ29yeSk7XHJcbiAgICBsb2FkX2NhdGVnb3J5X3JlZ2lvbihtYWluX2NhdGVnb3J5KTtcclxufVxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5X2xpc3QoYWN0aXZlX25hbWUpIHtcclxuICAgIEFwcC5jYXRlZ29yeV9saXN0ID0gW1xyXG4gICAgICAgIHtuYW1lOiAn5YWo6YOoJ31cclxuICAgIF07XHJcbiAgICBpZighQ2F0ZWdvcnlMaXN0RGF0YSlyZXR1cm47XHJcbiAgICAkLmVhY2goQ2F0ZWdvcnlMaXN0RGF0YVthY3RpdmVfbmFtZV0sIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgIEFwcC5jYXRlZ29yeV9saXN0LnB1c2goaXRlbSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5X3llYXIobmFtZSkge1xyXG4gICAgdmFyIGNvbnRleHQgPSB7J2NhdGVnb3J5JzogbmFtZX07XHJcbiAgICAkLmdldChZRUFSX1VSTCwgY29udGV4dCwgZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgIEFwcC5jYXRlZ29yeV95ZWFyID0gW1xyXG4gICAgICAgICAgICB7bmFtZTogJ+WFqOmDqCd9XHJcbiAgICAgICAgXTtcclxuICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBBcHAuY2F0ZWdvcnlfeWVhci5wdXNoKHtuYW1lOiB2YWx1ZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG5mdW5jdGlvbiBsb2FkX2NhdGVnb3J5X3JlZ2lvbihuYW1lKSB7XHJcbiAgICB2YXIgY29udGV4dCA9IHsnY2F0ZWdvcnknOiBuYW1lfTtcclxuICAgICQuZ2V0KFJFR0lPTl9VUkwsIGNvbnRleHQsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICBBcHAuY2F0ZWdvcnlfcmVnaW9uID0gW1xyXG4gICAgICAgICAgICB7bmFtZTogJ+WFqOmDqCd9XHJcbiAgICAgICAgXTtcclxuICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBBcHAuY2F0ZWdvcnlfcmVnaW9uLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEFwcC5hY3RpdmVfcmVnaW9uID0gJ+WFqOmDqCc7XHJcbiAgICB9KVxyXG59XHJcbmZ1bmN0aW9uIGxvYWRfc2VhcmNoX3Jlc3VsdCgpe1xyXG4gICAgQnVzLiRlbWl0KCdyZXNldEluZmluaXRlJyk7XHJcbn1cclxuZnVuY3Rpb24gbG9hZF92aWRlb19kZXRhaWwoaWQpIHtcclxuICAgIHZhciB1cmwgPSBWSURFT19ERVRBSUxfVVJMICsgaWQ7XHJcbiAgICAkLmdldCh1cmwsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICBBcHAudmlkZW8gPSBkYXRhO1xyXG4gICAgICAgIGNyZWF0ZV92aWRlbyhBcHAudmlkZW8udmlkZW8pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gbG9hZF90dl9kZXRhaWwoaWQpIHtcclxuICAgIHZhciB1cmwgPSBUVl9ERVRBSUxfVVJMICsgaWQ7XHJcbiAgICAkLmdldCh1cmwsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICBBcHAudmlkZW8gPSBkYXRhO1xyXG4gICAgICAgIGNyZWF0ZV92aWRlbyhBcHAudmlkZW8udXJsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZV92aWRlb19kZXRhaWxfaHRtbCgpIHtcclxuICAgIHJldHVybiAnPHZpZGVvIGlkPVwiaWRfdmlkZW9fanNcIiBjbGFzcz1cInZpZGVvLWpzIHZqcy1kZWZhdWx0LXNraW4gdmpzLWZpbGxcIj4nICtcclxuICAgICAgICAnPHA+6K+l6L2v5Lu25LiN5pSv5oyB5pKt5pS+6KeG6aKRLOivt+S9v+eUqENocm9tZeaIluWFtuS7lua1j+iniOWZqCzosKLosKI8L3A+JyArXHJcbiAgICAgICAgJzwvdmlkZW8+J1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZV92aWRlbyh2aWRlb191cmwpIHtcclxuICAgIC8vIG15UGxheWVyID0gdmlkZW9qcygnaWRfdmlkZW9fanMnLHt9LGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICBhbGVydCgnc2V0dXAgdmlkZW9qcycpO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy8gaWYgKG15UGxheWVyKSB7XHJcbiAgICAvLyAgICAgbXlQbGF5ZXIucGF1c2UoKTtcclxuICAgIC8vICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gICAgICAgICBteVBsYXllci5kaXNwb3NlKCk7XHJcbiAgICAvLyAgICAgICAgIG15UGxheWVyID0gbnVsbDtcclxuICAgIC8vICAgICB9LCAwKTtcclxuICAgIC8vIH1cclxuICAgICQoJyNpZF92aWRlb19jb250YWluZXInKS5odG1sKGNyZWF0ZV92aWRlb19kZXRhaWxfaHRtbCgpKTtcclxuICAgIG15UGxheWVyID0gdmlkZW9qcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRfdmlkZW9fanMnKSwge1xyXG4gICAgICAgIGNvbnRyb2xzOiB0cnVlLFxyXG4gICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICBwcmVsb2FkOiAnYXV0bycsXHJcbiAgICAgICAgdGVjaE9yZGVyOlsnaHRtbDUnLCAnZmxhc2gnXVxyXG4gICAgICAgIC8vIGZsYXNoOiB7XHJcbiAgICAgICAgLy8gICAgIGhsczoge1xyXG4gICAgICAgIC8vICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzZXR1cCB2aWRlb2pzJyk7XHJcbiAgICAgICAgLy/oh6rlrprkuYnmkq3mlL7mjInpkq5cclxuICAgICAgICB2YXIgJGN1c3RvbWVyX3BsYXkgPSAkKCc8YnV0dG9uIGNsYXNzPVwidmpzLWNvbnRyb2xcIiBpZD1cImlkX2Z1bGxfc2NyZWVuXCI+JytcclxuICAgICAgICAgICAgICAgICc8c3Bhbj7nvZHpobXlhajlsY88L3NwYW4+JytcclxuICAgICAgICAgICAgICAgICc8L2J1dHRvbj4nKTtcclxuICAgICAgICAkY3VzdG9tZXJfcGxheS5jbGljayhvbkNsaWNrQ3VzdG9tRnVsbFNjcmVlbik7XHJcbiAgICAgICAgLy8gdmFyIGNvbnRyb2xCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2anMtY29udHJvbC1iYXInKVswXTtcclxuICAgICAgICAkKCcudmpzLWNvbnRyb2wtYmFyJykuYXBwZW5kKCRjdXN0b21lcl9wbGF5KTtcclxuICAgIH0pO1xyXG4gICAgbXlQbGF5ZXIucGF1c2UoKTtcclxuICAgIHZhciBzcmMgPSB7XHJcbiAgICAgICAgc3JjOiB2aWRlb191cmwsXHJcbiAgICAgICAgdHlwZTogJ3ZpZGVvL21wNCcsXHJcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIGlmICh2aWRlb191cmwuZW5kc1dpdGgoJ20zdTgnKSkge1xyXG4gICAgICBzcmMudHlwZSA9ICdhcHBsaWNhdGlvbi94LW1wZWdVUkwnO1xyXG4gICAgICBzcmMuc3JjID0gVVJMX1BSRUZJWCArICcvbWVkaWEvcmVjb3JkLycgKyBzcmMuc3JjO1xyXG4gICAgICBjb25zb2xlLmxvZygnbTN1OCB1cmwgaXM6JytzcmMuc3JjKTtcclxuICAgIH1cclxuICAgIG15UGxheWVyLnNyYyhzcmMpO1xyXG4gICAgbXlQbGF5ZXIucGxheSgpO1xyXG59XHJcbnZhciBjdXJyZW50X2Z1bGxfc2NyZWVuID0gZmFsc2U7XHJcbmZ1bmN0aW9uIG9uQ2xpY2tDdXN0b21GdWxsU2NyZWVuKCkge1xyXG4gICAgLy9sYW5ndWFnZT1KUXVlcnktQ1NTXHJcbiAgICB2YXIgJHZpZGVvX2NvbnRhaW5lciA9ICQoXCIjaWRfdmlkZW9fY29udGFpbmVyXCIpO1xyXG4gICAgdmFyICRmdWxsX3NjcmVlbl9idG4gPSAkKFwiI2lkX2Z1bGxfc2NyZWVuXCIpO1xyXG4gICAgaWYoIWN1cnJlbnRfZnVsbF9zY3JlZW4pe1xyXG4gICAgICAgIGN1cnJlbnRfZnVsbF9zY3JlZW4gPSB0cnVlO1xyXG4gICAgICAgICR2aWRlb19jb250YWluZXIuYWRkQ2xhc3MoJ2N1c3RvbV9mdWxsX3NjcmVlbicpO1xyXG4gICAgICAgICR2aWRlb19jb250YWluZXIuYWRkQ2xhc3MoJ3ZpZGVvLXdyYXBwZXItZnVsbCcpO1xyXG4gICAgICAgICRmdWxsX3NjcmVlbl9idG4uaHRtbCgnPHNwYW4+5Y+W5raI5YWo5bGPPC9zcGFuPicpXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBjdXJyZW50X2Z1bGxfc2NyZWVuID0gZmFsc2U7XHJcbiAgICAgICAgJHZpZGVvX2NvbnRhaW5lci5yZW1vdmVDbGFzcygnY3VzdG9tX2Z1bGxfc2NyZWVuJyk7XHJcbiAgICAgICAgJHZpZGVvX2NvbnRhaW5lci5yZW1vdmVDbGFzcygndmlkZW8td3JhcHBlci1mdWxsJyk7XHJcbiAgICAgICAgJGZ1bGxfc2NyZWVuX2J0bi5odG1sKCc8c3Bhbj7nvZHpobXlhajlsY88L3NwYW4+JylcclxuICAgIH1cclxufVxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnI215LW1vZGFsLWxvYWRpbmcnKS5tb2RhbCgpO1xyXG4gICAgJCgnI2lkX2FkbWluX2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBBRE1JTl9TSVRFO1xyXG4gICAgfSk7XHJcbiAgICAkLmdldChDQVRFR09SWV9VUkwsIHtmb3JtYXQ6J2pzb24nfSwgZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgIC8vIGFsZXJ0KCdHZXQgRGF0YSBEb25lIScrZGF0YSk7XHJcbiAgICAgICAgQ2F0ZWdvcnlMaXN0RGF0YSA9IGRhdGE7XHJcbiAgICAgICAgLy8gbG9hZF9jYXRlZ29yeV95ZWFyKCk7XHJcbiAgICAgICAgJCgnI215LW1vZGFsLWxvYWRpbmcnKS5tb2RhbCgnY2xvc2UnKTtcclxuICAgICAgICBsb2FkX2NhdGVnb3J5X21haW4oKTtcclxuICAgIH0pO1xyXG59KSgpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcHAvcm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ })
/******/ ]);