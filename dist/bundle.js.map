{"version":3,"sources":["webpack:///webpack/bootstrap 8007dcda9d8ed7d0f545","webpack:///./src/app/router.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sBAAsB,kCAAkC;AACxD,sBAAsB;AACtB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,mCAAmC,mCAAmC;AACtE;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,UAAU;AAC5C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,mBAAmB;AACnB;AACA;AACA,aAAa;AACb;AACA;AACA,oCAAoC,YAAY;AAChD,SAAS;AACT,KAAK;AACL;AACA;AACA,mBAAmB;AACnB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,yBAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8007dcda9d8ed7d0f545","/**\r\n * Created by hhy on 2017/10/14.\r\n */\r\n'use strict';\r\n/* 全局变量 开始*/\r\nvar URL_PREFIX = 'http://192.168.0.145:8000';\r\nvar CATEGORY_URL = URL_PREFIX + '/vod/api/category';\r\nvar YEAR_URL = URL_PREFIX + '/vod/api/year';\r\nvar REGION_URL = URL_PREFIX + '/vod/api/region';\r\nvar VIDEO_LIST_URL = URL_PREFIX + '/vod/api';\r\nvar VIDEO_DETAIL_URL = URL_PREFIX + '/vod/api/';\r\nvar ADMIN_SITE = URL_PREFIX + '/admin';\r\nvar TV_LIST_URL = URL_PREFIX + '/vod/api/record';\r\nvar TV_DETAIL_URL = URL_PREFIX + '/vod/api/record/';\r\n\r\nvar DEFAULT_SELECT_DATA = {\r\n    category: '全部',\r\n    year: '全部',\r\n    region: '全部'\r\n};\r\nvar CategoryListData;\r\nvar IScroll = $.AMUI.iScroll;\r\nvar myPlayer;\r\nvar curData = DEFAULT_SELECT_DATA;\r\n/* IE兼容性函数 */\r\nif(typeof String.prototype.endsWith != 'function'){\r\n    String.prototype.endsWith = function (suffix) {\r\n        return this.indexOf(suffix, this.length - suffix.length) !== -1;\r\n    }\r\n}\r\n\r\n/* Vue对象 */\r\nVue.component('v-select', VueSelect.VueSelect);\r\nvar HomeView = {\r\n    name: 'Home',\r\n    template: '<div>Home</div>'\r\n};\r\nvar CategoryList = {\r\n    template: '#id_category_list',\r\n    props: ['category_list'],\r\n    data: function () {\r\n        return {\r\n            active_name: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select: function (name) {\r\n            this.active_name = name;\r\n            App.active_list = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    beforeRouteEnter:function (to, from, next) {\r\n        console.log('category before route enter');\r\n        next(function () {\r\n            load_category_list(to.params.main_category);\r\n        });\r\n    }\r\n};\r\nvar CategoryAdvanced = {\r\n    template: '#id_category_advanced',\r\n    props: ['category_year', 'category_region'],\r\n    data: function () {\r\n        return {\r\n            active_year: '全部',\r\n            active_region: '全部'\r\n        }\r\n    },\r\n    methods: {\r\n        select_year: function (name) {\r\n            this.active_year = name;\r\n            App.active_year = name;\r\n            load_search_result();\r\n        },\r\n        select_region: function (name) {\r\n            this.active_region = name;\r\n            App.active_region = name;\r\n            load_search_result();\r\n        }\r\n    },\r\n    mounted:function () {\r\n    },\r\n    beforeRouteEnter:function (to, from, next) {\r\n        console.log('category advanced before route enter');\r\n        next(function () {\r\n            load_category_year(to.params.main_category);\r\n            load_category_region(to.params.main_category);\r\n        });\r\n    }\r\n};\r\nvar VideoItem = {\r\n    template: '#id_video_item',\r\n    props: ['video'],\r\n    computed: {\r\n        full_image_url: function () {\r\n            return URL_PREFIX + this.video.image;\r\n        }\r\n    },\r\n    methods:{\r\n        selectVideo:function (id) {\r\n            router.push({path: '/vod/' + id});\r\n            console.log('select video '+id)\r\n        }\r\n    }\r\n};\r\nvar VideoListData = {\r\n    videos:[],\r\n    cur_page: 1,\r\n    num_pages: 0,\r\n    count:0\r\n};\r\nvar VideoList = {\r\n    template: '#id_video_list',\r\n    props: [],\r\n    components:{\r\n        'video-item':VideoItem\r\n    },\r\n    data:function () {\r\n        return VideoListData;\r\n    },\r\n    mounted:function () {\r\n        console.log('Video List Created');\r\n        var _video_list = this;\r\n        Bus.$on('resetInfinite', function () {\r\n            _video_list.resetInfinite(_video_list);\r\n        })\r\n    },\r\n    beforeDestroy:function () {\r\n      console.log('video list before destroy')\r\n    },\r\n    methods:{\r\n        infiniteHandler: function ($state) {\r\n            var vue = this;\r\n            // if(vue.num_pages === 0){\r\n            //     $state.complete();\r\n            //     return null;\r\n            // }\r\n            var context = {\r\n                'page': vue.cur_page,\r\n                'main_category': router.currentRoute.params.main_category,\r\n                'category': App.active_list,\r\n                'year': App.active_year,\r\n                'region': App.active_region,\r\n                'search': App.search_word\r\n            };\r\n            console.log(context);\r\n            $.get(VIDEO_LIST_URL, context, function (data, status) {\r\n                vue.count = data['count'];\r\n                vue.cur_page = data['cur_page'];\r\n                vue.num_pages = data['num_pages'];\r\n                $.each(data['results'], function (index, value) {\r\n                    vue.videos.push(value);\r\n                });\r\n                if (vue.cur_page === vue.num_pages) {\r\n                    $state.complete();\r\n                } else {\r\n                    console.log('cur_page=' + vue.cur_page);\r\n                    $state.loaded();\r\n                    vue.cur_page++;\r\n                }\r\n            });\r\n        },\r\n        resetInfinite: function (object) {\r\n            var _video_list = object;\r\n            _video_list.videos = [];\r\n            _video_list.cur_page = 1;\r\n            _video_list.num_pages = 1;\r\n            _video_list.$nextTick(function(){\r\n                console.log('Reset Video Gallery');\r\n                _video_list.$refs.infiniteLoading.$emit('$InfiniteLoading:reset');\r\n            });\r\n        }\r\n    },\r\n    beforeRouteUpdate:function (to, from, next) {\r\n        console.log('video list reused!');\r\n        load_category_info(to.params.main_category);\r\n        load_search_result();\r\n        next();\r\n    }\r\n};\r\nvar VideoContainer = {\r\n    template: '#id_detail',\r\n    props : ['video'],\r\n    data:function () {\r\n        return {\r\n            active_name:''\r\n        }\r\n    },\r\n    computed:{\r\n    },\r\n    methods:{\r\n        load_video: function (video_url) {\r\n            create_video(video_url);\r\n        },\r\n        select: function (name) {\r\n            this.active_name = name;\r\n        },\r\n        change_description: function(video) {\r\n            this.video.description = video.description;\r\n        }\r\n    },\r\n    mounted:function () {\r\n        console.log('video detail mounted');\r\n        if(router.currentRoute.name === 'video_detail'){\r\n            load_video_detail(router.currentRoute.params.id);\r\n        }else if (router.currentRoute.name ==='tv_detail') {\r\n            load_tv_detail(router.currentRoute.params.id);\r\n        }\r\n    },\r\n    updated:function () {\r\n      console.log('video detail updated');\r\n    }\r\n};\r\n// -------------------------------TV---------------------------------------\r\nvar TVCategory = {\r\n    template: '#id_tv',\r\n    methods:{\r\n        select_channel: function (data) {\r\n            console.log(data.channel_id);\r\n        }\r\n    },\r\n    data:function () {\r\n        return {\r\n            options:[{channel_id:null,channel_name:'全部'}],\r\n            selected:{channel_id:null,channel_name:'全部'}\r\n        }\r\n    },\r\n    mounted:function () {\r\n        console.log('TV Category mounted');\r\n        var _tv_category = this;\r\n        $.get(URL_PREFIX+'/tv/api/channels',function(data, status){\r\n            _tv_category.options=[{channel_id:'全部', channel_name:'全部'}];\r\n            _tv_category.options = _tv_category.options.concat(data);\r\n        });\r\n    }\r\n};\r\nvar TVItem = {\r\n    template: '#id_tv_item',\r\n    props: ['video'],\r\n    computed: {\r\n    },\r\n    methods:{\r\n        selectVideo:function (id) {\r\n            router.push({path: '/tv/' + id});\r\n            console.log('select tv '+id)\r\n        }\r\n    }\r\n};\r\nvar TVListData = {\r\n    videos:[],\r\n    cur_page: 1,\r\n    num_pages: 0,\r\n    count:0\r\n};\r\nvar TVList = {\r\n    template: '#id_tv_list',\r\n    props: [],\r\n    components:{\r\n        'tv-item':TVItem\r\n    },\r\n    data:function () {\r\n        return TVListData;\r\n    },\r\n    mounted:function () {\r\n        console.log('TV List Created');\r\n        var _video_list = this;\r\n        Bus.$on('resetInfiniteTV', function () {\r\n            _video_list.resetInfiniteTV(_video_list);\r\n        })\r\n    },\r\n    beforeDestroy:function () {\r\n      console.log('video list before destroy')\r\n    },\r\n    methods:{\r\n        infiniteHandler: function ($state) {\r\n            var vue = this;\r\n            var context = {\r\n                'page': vue.cur_page,\r\n                'search': App.search_word\r\n            };\r\n            console.log(context);\r\n            $.get(TV_LIST_URL, context, function (data, status) {\r\n                vue.count = data['count'];\r\n                vue.cur_page = data['cur_page'];\r\n                vue.num_pages = data['num_pages'];\r\n                $.each(data['results'], function (index, value) {\r\n                    vue.videos.push(value);\r\n                });\r\n                if (vue.cur_page === vue.num_pages) {\r\n                    $state.complete();\r\n                } else {\r\n                    console.log('cur_page=' + vue.cur_page);\r\n                    $state.loaded();\r\n                    vue.cur_page++;\r\n                }\r\n            });\r\n        },\r\n        resetInfiniteTV: function (object) {\r\n            var _video_list = object;\r\n            _video_list.videos = [];\r\n            _video_list.cur_page = 1;\r\n            _video_list.num_pages = 1;\r\n            _video_list.$nextTick(function(){\r\n                console.log('Reset TV Gallery');\r\n                _video_list.$refs.infiniteLoading.$emit('$InfiniteLoading:reset');\r\n            });\r\n        }\r\n    }\r\n};\r\nvar router = new VueRouter({\r\n    mode: 'hash',\r\n    base: window.location.href,\r\n    linkActiveClass: 'am-active',\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            components: {\r\n                default: HomeView\r\n            },\r\n            props: {\r\n                default: true\r\n            }\r\n        },\r\n        {\r\n            path:'/vod/:id',\r\n            name:'video_detail',\r\n            components:{\r\n                video_detail: VideoContainer\r\n            },\r\n            props:{\r\n                video_detail:true\r\n            }\r\n        },\r\n        {\r\n            path: '/list/:main_category',\r\n            components: {\r\n                default: CategoryList,\r\n                category_advanced: CategoryAdvanced,\r\n                video_list: VideoList\r\n            },\r\n            props: {\r\n                default: true,\r\n                category_advanced: true,\r\n                video_list: true\r\n            },\r\n            beforeEnter: function (to, from, next) {\r\n                console.log('router beforeEnter');\r\n                next();\r\n            }\r\n        },\r\n        {\r\n            path: '/tv',\r\n            components:{\r\n                tv_category: TVCategory,\r\n                tv_list: TVList\r\n            },\r\n            props:{\r\n                tv_category: true,\r\n                tv_list: true\r\n            }\r\n        },\r\n        {\r\n            path:'/tv/:id',\r\n            name:'tv_detail',\r\n            components:{\r\n                video_detail: VideoContainer\r\n            },\r\n            props:{\r\n                video_detail:true\r\n            }\r\n        },\r\n\r\n    ]\r\n});\r\nvar Bus = new Vue();\r\nvar App = new Vue({\r\n    el: '#id_app',\r\n    router: router,\r\n    data: {\r\n        main_categories: [],\r\n        active_name: '',\r\n        active_list: '全部',\r\n        active_year: '全部',\r\n        active_region: '全部',\r\n        category_list: [],\r\n        category_year: [],\r\n        category_region: [],\r\n        search_word: '',\r\n        video:{}\r\n    },\r\n    methods:{\r\n        onSubmit:function () {\r\n\r\n            load_search_result();\r\n        }\r\n    }\r\n});\r\n// router.beforeEach(function (to, from, next) {\r\n//     // load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     // next();\r\n//     load_category_info(to.params.main_category);\r\n//     // load_search_result();\r\n//     console.log('success');\r\n//     next();\r\n// });\r\n\r\nfunction load_category_main() {\r\n    var first = true;\r\n    $.each(CategoryListData, function (key, value) {\r\n        if (first) {\r\n            App.active_name = key;\r\n            first = false;\r\n        }\r\n        App.main_categories.push({name: key});\r\n    });\r\n    load_category_info(router.currentRoute.params.main_category);\r\n}\r\nfunction load_category_info(main_category) {\r\n    load_category_list(main_category);\r\n    load_category_year(main_category);\r\n    load_category_region(main_category);\r\n}\r\nfunction load_category_list(active_name) {\r\n    App.category_list = [\r\n        {name: '全部'}\r\n    ];\r\n    if(!CategoryListData)return;\r\n    $.each(CategoryListData[active_name], function (index, item) {\r\n        App.category_list.push(item);\r\n    });\r\n}\r\nfunction load_category_year(name) {\r\n    var context = {'category': name};\r\n    $.get(YEAR_URL, context, function (data, status) {\r\n        App.category_year = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_year.push({name: value});\r\n        });\r\n    })\r\n}\r\nfunction load_category_region(name) {\r\n    var context = {'category': name};\r\n    $.get(REGION_URL, context, function (data, status) {\r\n        App.category_region = [\r\n            {name: '全部'}\r\n        ];\r\n        $.each(data, function (index, value) {\r\n            App.category_region.push(value);\r\n        });\r\n        App.active_region = '全部';\r\n    })\r\n}\r\nfunction load_search_result(){\r\n    Bus.$emit('resetInfinite');\r\n}\r\nfunction load_video_detail(id) {\r\n    var url = VIDEO_DETAIL_URL + id;\r\n    $.get(url, function (data, status) {\r\n        App.video = data;\r\n        create_video(App.video.video);\r\n    });\r\n}\r\nfunction load_tv_detail(id) {\r\n    var url = TV_DETAIL_URL + id;\r\n    $.get(url, function (data, status) {\r\n        App.video = data;\r\n        create_video(App.video.url);\r\n    });\r\n}\r\nfunction create_video_detail_html() {\r\n    return '<video id=\"id_video_js\" class=\"video-js vjs-default-skin vjs-fill\">' +\r\n        '<p>该软件不支持播放视频,请使用Chrome或其他浏览器,谢谢</p>' +\r\n        '</video>'\r\n}\r\nfunction create_video(video_url) {\r\n    // myPlayer = videojs('id_video_js',{},function () {\r\n    //     alert('setup videojs');\r\n    // });\r\n\r\n    // if (myPlayer) {\r\n    //     myPlayer.pause();\r\n    //     setTimeout(function() {\r\n    //         myPlayer.dispose();\r\n    //         myPlayer = null;\r\n    //     }, 0);\r\n    // }\r\n    $('#id_video_container').html(create_video_detail_html());\r\n    myPlayer = videojs(document.getElementById('id_video_js'), {\r\n        controls: true,\r\n        autoplay: false,\r\n        preload: 'auto',\r\n        techOrder:['html5', 'flash']\r\n        // flash: {\r\n        //     hls: {\r\n        //         withCredentials: false\r\n        //     }\r\n        // }\r\n    }, function () {\r\n        console.log('setup videojs');\r\n        //自定义播放按钮\r\n        var $customer_play = $('<button class=\"vjs-control\" id=\"id_full_screen\">'+\r\n                '<span>网页全屏</span>'+\r\n                '</button>');\r\n        $customer_play.click(onClickCustomFullScreen);\r\n        // var controlBar = document.getElementsByClassName('vjs-control-bar')[0];\r\n        $('.vjs-control-bar').append($customer_play);\r\n    });\r\n    myPlayer.pause();\r\n    var src = {\r\n        src: video_url,\r\n        type: 'video/mp4',\r\n        withCredentials: false\r\n    };\r\n    if (video_url.endsWith('m3u8')) {\r\n      src.type = 'application/x-mpegURL';\r\n      src.src = URL_PREFIX + '/media/record/' + src.src;\r\n      console.log('m3u8 url is:'+src.src);\r\n    }\r\n    myPlayer.src(src);\r\n    myPlayer.play();\r\n}\r\nvar current_full_screen = false;\r\nfunction onClickCustomFullScreen() {\r\n    //language=JQuery-CSS\r\n    var $video_container = $(\"#id_video_container\");\r\n    var $full_screen_btn = $(\"#id_full_screen\");\r\n    if(!current_full_screen){\r\n        current_full_screen = true;\r\n        $video_container.addClass('custom_full_screen');\r\n        $video_container.addClass('video-wrapper-full');\r\n        $full_screen_btn.html('<span>取消全屏</span>')\r\n    }else{\r\n        current_full_screen = false;\r\n        $video_container.removeClass('custom_full_screen');\r\n        $video_container.removeClass('video-wrapper-full');\r\n        $full_screen_btn.html('<span>网页全屏</span>')\r\n    }\r\n}\r\n(function () {\r\n    $('#my-modal-loading').modal();\r\n    $('#id_admin_btn').click(function(){\r\n        window.location.href = ADMIN_SITE;\r\n    });\r\n    $.get(CATEGORY_URL, {format:'json'}, function (data, status) {\r\n        // alert('Get Data Done!'+data);\r\n        CategoryListData = data;\r\n        // load_category_year();\r\n        $('#my-modal-loading').modal('close');\r\n        load_category_main();\r\n    });\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/router.js\n// module id = 0\n// module chunks = 0 1"],"sourceRoot":""}